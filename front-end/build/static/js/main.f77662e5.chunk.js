(this["webpackJsonpreact-frontend"]=this["webpackJsonpreact-frontend"]||[]).push([[0],{331:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAV1BMVEX///91dXVwcHBra2vi4uK9vb3U1NTt7e2qqqqurq7x8fF7e3v39/dxcXGAgIDCwsKSkpJoaGjV1dWWlpaLi4vn5+eenp6FhYXHx8e3t7etra3u7u7Ozs7QPe/4AAAEHUlEQVR4nO2d63aiMBRGS2IFCqhQe7Hj+z/nOLqmseYETiDk1m//LdXs8q3knBjq0xMAAAAAgFvaYV/vhzb0MFbjT1VIIYQsqjL0UFahraUobghZZ3gft81/v6tjcw49IMeUr7L4iXx9Cz0ol9SyKx7pZB16WM44/whoflHVA3oX1UMGUa07PaB3URWpR3Vb0AG9i2qRclTfRgJ6F9V0Z9XxgKYf1a1hBiWj2mxDD9eatwMnoHdRTWxWbU/EEj8RVXlKqFY97/gBVaRTAJSWAVXIYwptVUvVoFy6BNoqmxmUIvaozg+oQh4ijmrdzw+ooutjLQBMTZI9cUZ1rEmyJ8ICoBYuAqqIrVY9TzZJ9sTUVvGaJHuiaau4TZI9XRdDVKe7+CWIInRbZdsk2RN4VnU9g1KEnFWX1qBcQu0AlMe1A6oI0Va1Jw8BVXTC9w6AuxqUi99a1UWTZI+/tmpRF78EXzsA/gOq8BHVMAFVrB5VN138EtbdAQgZUMV6UXXbxS9Bvq4SVR81KJc1atV1myR7XLdVa3XxS3C6AxBTQBXuouqrSbLHTVu1fhe/hOU7AJ6bJHuWtlVxLPHjLCkAQtegXObWqm2cMyjFZVadEdUUAqqwj2oqAVXYRbU9BW+S7Ol6/qw677BIeMSOF9X0AqpgRTXUNpMbpo9Wx1uDchmvVdv3dAOqkO/GGaf9SP0G3hAfJsVjHoIXxSMt+JlDRG/IT9JwF3pcDtlRgptcMvoPsSEM91kZ7gnDOitDauHP3zD/lG7yWSwuywU10zw1oYflkIYS/AUrfv5V2y+ovC/dU4L7M490vbl7ujAchCBuZCdjhLgbl9EfhhG/633c6AtjVw3b+BgqTVHsN5z9Nn1hFM+MX/PPs3Yr6GVQA4bRAEMjMIwGGBqB4TTlRoN6Hw3LD6sDGla9+ImU+uBLKR+u6iu7twloSGz5EIbaNbZnnGBoBIbTwPAKDKeBoREYTgPDKzCcBoZGYDgNDK/AcJq4DF+0i14yMzztHzllZih0MjPkAEMYwhCGMIQhDGEIQxjCEIYwhCEMYQhDGMIQhjCEIQxhCEMYwhCGMIzQ8Gum4VcyhnXRzKFI5x62c0nG0BMwNALDaIChERhGAwyNjBm2lQbxr2A+9auI86VzX+q7LljF8OXx6VAhiQc/q8enQ4Ugzghr1/Beqv/+Y61jqP+MGJbDU9CVbgFDGMIQhjCEIQxhCEMYwhCGMIzSkPg4xaGh/iGPd8Oi2WkQ/5GYY8h7Kf+GPFiGLGAIQxjC0AQM+cAQhjCEoQkY8oEhDGEIQxMw5ANDGMIQhiZgyAeGMIQhDE3AkA8MYQjDPAy18/j9yFl9Jpyz+jzuzurrA+UZlvojDt9f7Uk8b8FDf3hy+UsN+s8sv/ULAAAAALnwF5Uim28qpdbyAAAAAElFTkSuQmCC"},348:function(e,t,a){e.exports=a.p+"static/media/logo.943143b7.png"},353:function(e,t,a){e.exports=a.p+"static/media/default.ebb44511.png"},408:function(e,t,a){e.exports=a(604)},413:function(e,t,a){},604:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(20),o=a.n(r),i=(a(413),a(25)),s=a(26),c=a(28),m=a(27),u=a(88),d=a(605),p=a(615),h=a(614),E=a(714),g=a(610),f=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).valueChanged=function(e,t){n.setState({value:e.target.value}),n.props.properties.customHandler(e,t)},n.state={value:"",properties:{}},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.properties,a=this.props.items;return l.a.createElement(d.a,{variant:"outlined",error:t.error,required:t.required,fullWidth:!0},l.a.createElement(p.a,{id:"selecter-id-label"},t.inputLabel),l.a.createElement(h.a,{fullWidth:!0,labelId:t.labelId,id:t.id,label:t.inputLabel,onChange:function(a){return e.valueChanged(a,t.name)},style:t.style,value:t.value},a.map((function(e,t){return l.a.createElement(E.a,{value:e.key},e.value)}))),l.a.createElement(g.a,null,t.helperText))}}]),a}(l.a.Component),v=a(368),b=a(370),C=a(51),y=a(698),z=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleDateChange=function(e){n.setState({selectedDate:e}),n.props.onChange(e)},n.state={selectedDate:new Date},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.properties;return l.a.createElement(C.a,{utils:v.a,locale:b.a},l.a.createElement(y.a,{margin:"normal",name:t.name,id:t.id,label:t.label,format:"dd/MM/yyyy",value:this.state.selectedDate,onChange:function(t){return e.handleDateChange(t)},KeyboardButtonProps:{"aria-label":"Cambia Data"},style:{width:t.width},invalidDateMessage:"Inserire una data Corretta"}))}}]),a}(l.a.Component),w=a(699),S=a(675),x=a(670),_=a(673),k=a(674),I=a(709),O=a(16),A=a.n(O),M=a(704),R=a(375),D={borderColor:"green",color:"green",fullWidth:200},j=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.handleChange=function(e,t){var a=e.target.value,l=n.state.error,r=n.state.visibility;switch(console.log(t),t){case"name":a.length<=0?l.name.status=!0:l.name.status=!1;break;case"surname":a.length<=0?l.surname.status=!0:l.surname.status=!1;break;case"email":a.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)?(l.email.status=!1,l.email.message="ok!"):(l.email.status=!0,l.email.message="Email non corretta!");break;case"password":a.length<=5?(l.password.status=!0,l.password.message="Password minore di 5 caratteri,troppo debole!"):(l.password.status=!1,l.password.message="ok!");break;case"password_confirm":a===n.state.password?(l.password_confirm.status=!1,l.password_confirm.message="Password Confermata"):(l.password_confirm.status=!0,l.password_confirm.message="Password diversa");break;case"userType":l.userType.status=!1,r.externalUserCompany="Esterno"===a;break;case"externalUserCompany":console.log(a),a.length<=1?(l.externalUserCompany.status=!0,l.externalUserCompany.message="Campo Richiesto per un utente Esterno!"):(l.externalUserCompany.status=!1,l.externalUserCompany.message="ok!")}n.setState(Object(u.a)({error:l,visibility:r},t,a),(function(e,t){console.log(e+":"+t)}))},n.handleDateChange=function(e){e instanceof Date&&!isNaN(e)?(console.log(e),n.setState({birthday:e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()}),n.setState((function(e){return e.error.birthday.status=!1}))):n.setState((function(e){return e.error.birthday.status=!0}))},n.trySignUp=function(){n._isMounted=!0,console.log(n.state);var e=n.state.error;e.name.status||e.surname.status||e.password.status||e.password_confirm.status||e.userType.status||e.birthday.status||"Esterno"===n.state.userType&&e.externalUserCompany.status?n._isMounted&&(n.setState((function(e){return e.sign_in.called=!0})),n.setState((function(e){return e.sign_in.successful=!1})),n.setState((function(e){return e.sign_in.message="Non posso proseguire, c'\xe8 qualche errore sui campi!"}))):A.a.post("api/Operatore/insert",{name:n.state.name,surname:n.state.surname,email:n.state.email,password:n.state.password,userType:n.state.userType,externalUserCompany:n.state.visibility.externalUserCompany?n.state.externalUserCompany:"",birthday:n.state.birthday,userTelephone:n.state.userTelephone}).then((function(e){200!==e.data.operationCode&&n._isMounted?(n.setState((function(e){return e.sign_in.called=!0})),n.setState((function(e){return e.sign_in.successful=!1})),n.setState((function(t){return t.sign_in.message=e.data.message}))):n._isMounted&&(n.setState((function(e){return e.sign_in.called=!0})),n.setState((function(e){return e.sign_in.successful=!0})),n.setState((function(e){return e.sign_in.message="Registrazione Avvenuta con successo, sarai re-indirizzato alla pagina di login tra 3 secondi!"})))})).catch((function(e){n._isMounted&&(n.setState((function(e){return e.sign_in.called=!0})),n.setState((function(e){return e.sign_in.successful=!1})),n.setState((function(e){return e.sign_in.message="Registrazione non riuscita a causa di qualche errore, riprovare pi\xf9 tardi!"}))),console.log(e)}))},n.switchToLogIn=function(){n.props.changeView("logIN")},n.state={sign_in:{called:!1,successful:!1,message:""},name:"",surname:"",email:"",password:"",password_confirm:"",userType:"",externalUserCompany:"",userTelephone:"",birthday:null,visibility:{externalUserCompany:!1},error:{name:{status:!0,message:""},surname:{status:!0,message:""},userType:{status:!0,message:""},email:{status:!0,message:""},password:{status:!0,message:""},password_confirm:{status:!0,message:""},birthday:{status:!1,message:""},externalUserCompany:{status:!0,message:""}},operatorType:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,console.log("Richieste le tipologie di operatori disponibili al server"),A.a.get("api/Operatori/type").then((function(t){console.log(t.data),e._isMounted&&e.setState({operatorType:t.data.items})})).catch((function(){e._isMounted&&e.setState({operatorType:["Default"]})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state.error;return l.a.createElement("div",null,l.a.createElement(w.a,null,l.a.createElement(w.a,{display:"flex",my:2},l.a.createElement(S.a,{container:!0,spacing:2,justify:"flex-start",alignItems:"flex-start"},l.a.createElement(S.a,{item:!0,xl:4,xs:6},l.a.createElement(x.a,{variant:"contained",onClick:this.switchToLogIn},"Ritorna al login")))),l.a.createElement(S.a,{container:!0,direction:"row",spacing:2,justify:"center",alignItems:"baseline"},l.a.createElement(S.a,{item:!0,xl:5,xs:5},l.a.createElement(_.a,{id:"name_textfield",error:t.name.status,onChange:function(t){return e.handleChange(t,"name")},label:"Nome",variant:"outlined",required:!0,fullWidth:!0,helperText:"*Campo Richiesto"})),l.a.createElement(S.a,{item:!0,xl:5,xs:6},l.a.createElement(_.a,{id:"surname_textfield",error:t.surname.status,onChange:function(t){return e.handleChange(t,"surname")},label:"Cognome",variant:"outlined",required:!0,fullWidth:!0,helperText:"*Campo Richiesto"})),l.a.createElement(S.a,{item:!0,xl:10,xs:11},l.a.createElement(_.a,{id:"email_textfield",error:t.email.status,name:"email",onChange:function(t){return e.handleChange(t,"email")},label:"Indirizzo Email",variant:"outlined",required:!0,fullWidth:!0,helperText:t.email.message})),l.a.createElement(S.a,{item:!0,xl:5,xs:5},l.a.createElement(_.a,{id:"password_textfield",error:t.password.status,onChange:function(t){return e.handleChange(t,"password")},type:"text",label:"Password",variant:"outlined",required:!0,fullWidth:!0,helperText:t.password.message})),l.a.createElement(S.a,{item:!0,xl:5,xs:6},l.a.createElement(_.a,{id:"password_confirm_textfield",error:t.password_confirm.status,onChange:function(t){return e.handleChange(t,"password_confirm")},type:"text",label:"Conferma Password",variant:"outlined",required:!0,fullWidth:!0,helperText:t.password_confirm.message})),l.a.createElement(S.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},l.a.createElement(S.a,{item:!0,xl:2,xs:2,container:!0,alignItems:"center",style:{marginTop:"3%"}},l.a.createElement(p.a,null,"Data Nascita")),l.a.createElement(S.a,{item:!0,xl:5,xs:5},l.a.createElement(z,{properties:{width:"90%",id:"data-nascita_picker",label:"",name:"birthday"},onChange:this.handleDateChange}))),l.a.createElement(S.a,{xl:5,xs:5,item:!0,container:!0,direction:"row"},l.a.createElement(S.a,{item:!0,xl:12,xs:12},l.a.createElement(f,{properties:{labelId:"label-selecter-id",id:"selecter",inputLabel:"Tipo Utente",style:D,value:this.state.userType,customHandler:this.handleChange,helperText:t.userType.message,name:"userType",error:t.userType.status},items:this.state.operatorType})),l.a.createElement(R.a,{in:this.state.visibility.externalUserCompany,timeout:1e3},this.state.visibility.externalUserCompany?l.a.createElement(S.a,{item:!0,xl:12,xs:12},l.a.createElement(_.a,{value:this.state.externalUserCompany,id:"externalUserCompany_textfield",error:t.externalUserCompany.status,onChange:function(t){return e.handleChange(t,"externalUserCompany")},label:"Ente Appartenenza",variant:"standard",required:!0,fullWidth:!0,helperText:t.externalUserCompany.message})):l.a.createElement("div",null))),l.a.createElement(S.a,{item:!0,xl:5,xs:6},l.a.createElement(_.a,{id:"outlined-full-width",onChange:function(t){return e.handleChange(t,"userTelephone")},label:"Telefono",variant:"outlined",fullWidth:!0,InputProps:{startAdornment:l.a.createElement(k.a,{position:"start"},"+39")}}))),l.a.createElement(w.a,{mt:3},l.a.createElement(S.a,{container:!0,item:!0,direction:"row",justify:"flex-end",alignItems:"baseline"},l.a.createElement(x.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(){return e.trySignUp()}},"Registrati")))),l.a.createElement("div",null,this.state.sign_in.called?l.a.createElement(I.a,{open:this.state.sign_in.called,autoHideDuration:2e3,onClose:function(){e.state.sign_in.successful?e.switchToLogIn():e.setState((function(e){return e.sign_in.called=!1}))}},l.a.createElement(M.a,{elevation:9,variant:"filled",severity:this.state.sign_in.successful?"success":"error"},this.state.sign_in.message)):l.a.createElement("div",null)))}}]),a}(l.a.Component),T=a(132),N=a(328),q=a.n(N),F=a(329),W=a.n(F),L=a(707),G=a(676),U=a(235),P=a(5),H=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.state={email:"",password:"",rememberMe:!1,formErrors:{email:{error:!0,message:""},password:{error:!0,message:""}},serverResponse:{response:!1,error:!1,message:""}},n.handleChange=n.handleChange.bind(Object(T.a)(n)),n.tryLogIn=n.tryLogIn.bind(Object(T.a)(n)),n}return Object(s.a)(a,[{key:"handleChange",value:function(e,t){var a=this.state.formErrors,n=e.target.value;switch(t){case"email":n.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)?(a.email.error=!1,a.email.message=""):(a.email.error=!0,a.email.message="Inserire una mail corretta");break;case"password":n.length>=0?(a.password.error=!1,a.password.message=""):(a.password.error=!0,a.password.message="Caratteri insufficienti per il campo password, mancanti:"+(6-n.length));break;case"rememberMe":console.log(e.target.checked),n=e.target.checked}this.setState(Object(u.a)({formErrors:a},t,n))}},{key:"tryLogIn",value:function(){var e=this;this._isMounted=!0;var t=this.state.serverResponse;console.log(""+(this.state.formErrors.email.error||this.state.formErrors.password.error)),this.state.formErrors.email.error||this.state.formErrors.password.error?(t.response=!0,t.error=!0,t.message="Alcuni campi sono errati!",this._isMounted&&this.setState({serverResponse:t})):(console.log("Try log in :"+this.state.email),A.a.post("api/login",{email:this.state.email,password:this.state.password,rememberMe:this.state.rememberMe}).then((function(a){200!==a.data.operationCode?(console.log(a.data.operationCode),console.log(a.data.message),t.response=!0,t.error=!0,t.message=a.data.message):e.props.changeView("main"),e._isMounted&&e.setState({serverResponse:t})})).catch((function(e){t.response=!0,t.error=!0,t.message=e}))),console.log(t)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{container:!0,direction:"column",spacing:3,justify:"center",alignItems:"center"},l.a.createElement(S.a,{item:!0,style:{maxWidth:"100%"}},l.a.createElement(d.a,{fullWidth:!0},l.a.createElement(U.a,null,l.a.createElement(_.a,{variant:"outlined",id:"email-textfield",label:"E-Mail",fullWidth:!0,onChange:function(t){return e.handleChange(t,"email")},InputProps:{startAdornment:l.a.createElement(k.a,{position:"start"},l.a.createElement(q.a,{style:{fill:"#1a237e"}}))}})),l.a.createElement(g.a,null,this.state.formErrors.email.message))),l.a.createElement(S.a,{item:!0,style:{maxWidth:"100%"}},l.a.createElement(d.a,{fullWidth:!0},l.a.createElement(U.a,null,l.a.createElement(_.a,{variant:"outlined",id:"password-basic",type:"password",label:"Password",fullWidth:!0,onChange:function(t){return e.handleChange(t,"password")},InputProps:{startAdornment:l.a.createElement(k.a,{position:"start"},l.a.createElement(W.a,{style:{fill:"#1a237e"}}))}})),l.a.createElement(g.a,null,this.state.formErrors.password.message))),l.a.createElement(S.a,{item:!0,style:{maxWidth:"60%"}},l.a.createElement(G.a,{control:l.a.createElement(L.a,{checked:this.state.rememberMe,onChange:function(t){return e.handleChange(t,"rememberMe")},name:"rememberMe"}),label:"Ricordami"})),l.a.createElement(S.a,{item:!0,style:{maxWidth:"100%"}},l.a.createElement(x.a,{fullWidth:!0,variant:"contained",onClick:function(){e.props.changeView("signUP")}},"Registrati")),l.a.createElement(S.a,{item:!0,style:{maxWidth:"100%"}},l.a.createElement(x.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(){e.tryLogIn()}},"Entra"))),l.a.createElement(I.a,{open:this.state.serverResponse.response,autoHideDuration:3e3,onClose:function(){e.setState((function(e){return e.serverResponse.response=!1}))}},l.a.createElement(M.a,{elevation:9,variant:"filled",severity:this.state.serverResponse.error?"error":"success"},this.state.serverResponse.message)))}}]),a}(l.a.Component),B=Object(P.a)((function(){return{root:{flexGrow:1}}}))(H),V=a(224),X=a(225),Y=a.n(X),Q=a(330),Z=a(372),J=a(678),K=a(672),$=a(123),ee=a(679),te=a(680),ae=a(349),ne=a.n(ae),le=a(351),re=a.n(le),oe=a(667),ie=a(668),se=a(376),ce=a(347),me=a.n(ce),ue=a(677),de=a(371),pe=a(121),he=a(706),Ee=a(703),ge=a(711),fe=a(331),ve=a.n(fe),be=function(e){return l.a.createElement(Ee.a,null,l.a.createElement(de.a,{src:ve.a,wrapped:!0,ui:!1}),l.a.createElement(Ee.a.Content,null,l.a.createElement(Ee.a.Header,null,e.className),l.a.createElement(Ee.a.Meta,null,l.a.createElement("span",{className:"date"},e.classShortInfo)),l.a.createElement(Ee.a.Description,null,e.classDescription)),l.a.createElement(Ee.a.Content,{extra:!0},l.a.createElement(ge.a,null,l.a.createElement(ge.a.Row,null,l.a.createElement(ge.a.Column,null,l.a.createElement(pe.a,{name:"setting"}),e.classNumberElement)),l.a.createElement(ge.a.Row,null,l.a.createElement(ge.a.Column,null,l.a.createElement(pe.a,{name:"setting"}),e.classNumberElement))),l.a.createElement(he.a,{floated:"right"},"Aggiungi",l.a.createElement(pe.a,{name:"add"}))))};function Ce(e){return l.a.createElement(be,{classImagePath:"../../images/stations/default.png",className:e.nomeComponente,classShortInfo:"Gestione "+e.nomeComponente,classNumberElement:e.componentiInMagazzino})}var ye=a(669),ze=(a(206),a(700));function we(e){var t=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ze.a,{open:!1,centered:!1,closeOnDimmerClick:!1,style:{zIndex:1}},l.a.createElement(ze.a.Header,null,"Aggiungi nuovo Sensore"),l.a.createElement(ze.a.Content,{scrolling:!0},l.a.createElement(ze.a.Description,null)),l.a.createElement(ze.a.Actions,null,l.a.createElement(he.a,{negative:!0},"Cancella"),l.a.createElement(he.a,{onClick:function(){t.addOperation()},positive:!0,labelPosition:"right",icon:"checkmark",content:"Salva"}))))}var Se=Object(oe.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}})),xe=l.a.forwardRef((function(e,t){return l.a.createElement(ue.a,Object.assign({direction:"up",ref:t},e))}));function _e(e){var t=Se();return l.a.createElement("div",null,l.a.createElement(ie.a,{fullScreen:!0,open:e.open,TransitionComponent:xe,scroll:"paper",style:{zIndex:0}},l.a.createElement(we,{open:!1}),l.a.createElement(J.a,{className:t.appBar},l.a.createElement(K.a,null,l.a.createElement(se.a,{edge:"start",color:"inherit",onClick:function(){e.handleChange(!1)},"aria-label":"close"},l.a.createElement(me.a,null)),l.a.createElement($.a,{variant:"h6",className:t.title},"Attrezzatura Osservatorio Vesuviano"))),l.a.createElement(ye.a,{dividers:"paper"},l.a.createElement(ge.a,{padded:!0},l.a.createElement(ge.a.Row,{columns:5},l.a.createElement(ge.a.Column,null,l.a.createElement(Ce,{nomeComponente:"Sensori",componentiInMagazzino:23})),l.a.createElement(ge.a.Column,null,l.a.createElement(Ce,{nomeComponente:"Acquisitori",componentiInMagazzino:22})),l.a.createElement(ge.a.Column,null,l.a.createElement(Ce,{nomeComponente:"Batterie",componentiInMagazzino:22})),l.a.createElement(ge.a.Column,null,l.a.createElement(Ce,{nomeComponente:"Regolatori carica",componentiInMagazzino:22})),l.a.createElement(ge.a.Column,null,l.a.createElement(Ce,{nomeComponente:"Gps",componentiInMagazzino:22}))),l.a.createElement(ge.a.Row,{columns:5},l.a.createElement(ge.a.Column,null,l.a.createElement(Ce,{nomeComponente:"Hard Disk",componentiInMagazzino:22})),l.a.createElement(ge.a.Column,null,l.a.createElement(Ce,{nomeComponente:"Pannelli Solari",componentiInMagazzino:22})),l.a.createElement(ge.a.Column,null,l.a.createElement(Ce,{nomeComponente:"Cavi",componentiInMagazzino:22})))))))}var ke=a(350),Ie=a.n(ke),Oe=a(348),Ae=a.n(Oe),Me=Object(P.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return l.a.createElement(Z.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),Re=Object(P.a)((function(e){return{root:{"&:focus":{backgroundColor:e.palette.primary.main,"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:e.palette.common.white}}}}}))(E.a),De=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).updateNrlCall=Object(Q.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.nrlUpdateEvent.putLock("Aggiornamento NRL in corso,attendere.."),A.a.get("api/NRL/update",{}).then((function(e){201===e.data.result?n.props.nrlUpdateEvent.putLock("Aggiornamento NRL in corso,attendere.."):n.props.nrlUpdateEvent.releaseLock()}));case 2:case"end":return e.stop()}}),e)}))),n.openMagazzino=function(e){n.setState({openMagazzino:e})},n.logout=function(){A.a.get("api/logout").then((function(e){console.log(e),200===e.data.operationCode&&n.props.changeView("logIN")}))},n.state={username:"",menu:null,openMagazzino:!1},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement(J.a,{position:"static",style:{background:"#3f51b5"}},l.a.createElement(K.a,null,l.a.createElement(w.a,{display:"flex",style:{flexGrow:1}},l.a.createElement(de.a,{src:Ae.a,size:"mini",fluid:!0}),l.a.createElement($.a,{variant:"h5",style:{paddingLeft:4}},"Istituto Nazionale Geofisica e Vulcanologia")),l.a.createElement(x.a,{"aria-controls":"customized-menu","aria-haspopup":"true",variant:"contained",color:"inherit",style:{background:"#1a237e"},onClick:function(t){e.setState({menu:t.currentTarget})}},"Open Menu"),l.a.createElement(Me,{id:"customized-menu",open:Boolean(this.state.menu),keepMounted:!0,anchorEl:this.state.menu,onClose:function(){e.setState({menu:null})}},l.a.createElement(l.a.Fragment,null,this.props.isMain?l.a.createElement(l.a.Fragment,null,l.a.createElement(Re,{onClick:function(){return e.logout()}},l.a.createElement(ee.a,null,l.a.createElement(ne.a,{style:{fill:"#1a237e"},fontSize:"small"})),l.a.createElement(te.a,{primary:"Log Out"})),l.a.createElement(Re,{onClick:function(){return e.openMagazzino(!0)}},l.a.createElement(ee.a,null,l.a.createElement(Ie.a,{style:{fill:"#1a237e"},fontSize:"small"})),l.a.createElement(te.a,{primary:"Gestisci Magazzino"})),l.a.createElement(_e,{open:this.state.openMagazzino,handleChange:this.openMagazzino})):l.a.createElement(l.a.Fragment,null)),l.a.createElement(Re,{onClick:function(){return e.updateNrlCall()}},l.a.createElement(ee.a,null,l.a.createElement(re.a,{style:{fill:"#1a237e"},fontSize:"small"})),l.a.createElement(te.a,{primary:"Aggiorna Database NRL"})))))}}]),a}(l.a.Component),je=a(611),Te=a(671),Ne=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.properties;return l.a.createElement(je.a,{style:{zIndex:2,color:"#fff"},open:e.hidden},l.a.createElement(S.a,{spacing:2,container:!0,direction:"column",justify:"center",alignItems:"center"},l.a.createElement(S.a,{item:!0},l.a.createElement(Te.a,{color:"secondary"})),l.a.createElement(S.a,{item:!0},l.a.createElement("h2",null,e.message))))}}]),a}(l.a.Component),qe=a(352),Fe=a.n(qe),We=a(229),Le=a(24),Ge=a(701),Ue=a(182),Pe=a(353),He=a.n(Pe),Be=a(716),Ve=a(681),Xe=a(682),Ye=a(355),Qe=a.n(Ye),Ze=a(326),Je=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={downloadError:!1},e.getStationXml=function(t){A.a.get("api/Stazione/"+t+"/StationXml").then((function(t){console.log(t),"application/xml; charset=utf-8"===t.headers["content-type"]?Ze(t.data,"station.xml"):e.setState({downloadError:!0})}))},e}return Object(s.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.properties.stationId!==this.state.stationId&&this.setState({nome_stazione:e.stationId})}},{key:"render",value:function(){var e=this,t=this.props.properties;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ge.a.Group,{divided:!0},l.a.createElement(Ge.a,null,l.a.createElement(Ge.a.Image,{size:"tiny",src:He.a}),l.a.createElement(Ge.a.Content,null,l.a.createElement(Ge.a.Header,{as:"a"},t.stationId),l.a.createElement(Ge.a.Meta,null,l.a.createElement("span",{className:"cinema"},"Data messa in funzione : ",t.startDate),l.a.createElement(Ue.a,null,t.stationType),l.a.createElement(Ue.a,null,t.isActive)),l.a.createElement(Ge.a.Description,null,"Numero Operazioni effettuate: ",t.operationCount),l.a.createElement(Ge.a.Extra,null,l.a.createElement(Be.a,{style:{backgroundColor:"#eceff1"}},l.a.createElement(Ve.a,{"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(Qe.a,{style:{color:"black",marginTop:2}}),l.a.createElement($.a,{align:"center",variant:"h5",style:{color:"black",paddingLeft:5}},"Attivit\xe0")),l.a.createElement(Xe.a,null,l.a.createElement(w.a,{display:"flex",flexDirection:"column",flexGrow:1},l.a.createElement(he.a,{basic:!0,color:"blue",style:{margin:2},onClick:function(){e.getStationXml(t.stationId)}},l.a.createElement("h4",{style:{color:"#3f51b5"}},"Scarica Station Xml")),l.a.createElement(he.a,{basic:!0,color:"blue",style:{margin:2},onClick:function(){t.openStationInfo(t.stationId)}},l.a.createElement("h4",{style:{color:"#3f51b5"}},"Visualizza Info"))))))))),l.a.createElement("div",null,this.state.downloadError?l.a.createElement(I.a,{open:this.state.downloadError,autoHideDuration:2e3,onClose:function(){e.setState({downloadError:!1})}},l.a.createElement(M.a,{elevation:9,variant:"filled",severity:"error"},"Non \xe8 stato possibile scaricare lo StationXml, controllare i canali della stazione!")):l.a.createElement("div",null)))}}]),a}(l.a.Component),Ke=a(721),$e=a(722),et=a(723),tt=a(683),at=a(724),nt=Ke.a.BaseLayer,lt=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={lat:40.863,lng:14.2767,zoom:8},e}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement($e.a,{center:[41.0842,14.3358],zoom:this.state.zoom},l.a.createElement(Ke.a,{position:"bottomright"},l.a.createElement(nt,{checked:!0,name:"Base"},l.a.createElement(et.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})),l.a.createElement(nt,{checked:!0,name:"Topografica"},l.a.createElement(et.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png' //'https://{s}.tile.osm.org/{z}/{x}/{y}.png"})),l.a.createElement(nt,{name:"Satellite"},l.a.createElement(et.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"}))),this.props.stations.map((function(e){return l.a.createElement(tt.a,{position:[e.latitudine,e.longitudine]},l.a.createElement(at.a,{zoomAnimation:!0},e.codice))})))}}]),a}(l.a.Component),rt=a(713),ot=a(180),it=a.n(ot),st=a(684),ct=a(712),mt=a(717),ut=a(685),dt=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l)))._isMounted=!1,e.state={modalOpen:!1,codice_stazione:"",tipo_stazione:"",periodo_manutenzione:1,latitudine:"0.0000",longitudine:"0.0000",ellissoide:"WGS-84",altezza_lv_mare:0,responsabile_1:null,responsabile_2:null,responsabile_3:null,responsabile_4:null,note_aggiuntive:null,operatore_installazione:"",operatori_list:[],registrazione:{chiamata:!1,stato:!1,messaggio:""}},e.handleOpen=function(){return e.setState({modalOpen:!0})},e.handleCancelOperation=function(){e.setState({modalOpen:!1}),e.resetInfo(),e.props.callReRender()},e.handleClose=function(){e.state.registrazione.stato?(e.setState({modalOpen:!1}),e.resetInfo(),e.props.callReRender()):e.setState((function(e){return e.registrazione.chiamata=!1}))},e.resetInfo=function(){var t=e.state.registrazione;t.chiamata=!1,t.stato=!1,t.messaggio="",e.setState({registrazione:t,codice_stazione:"",tipo_stazione:"",periodo_manutenzione:1,latitudine:"0.0000",longitudine:"0.0000",ellissoide:"WGS-84",altezza_lv_mare:0,responsabile_1:null,responsabile_2:null,responsabile_3:null,responsabile_4:null,note_aggiuntive:"",operatore_installazione:""})},e.handleLatitudineChange=function(t){return e.setState({latitudine:t.target.value})},e.handleLongitudineChange=function(t){return e.setState({longitudine:t.target.value})},e.handleCodiceStazioneChange=function(t){return e.setState({codice_stazione:t.target.value.toUpperCase()})},e.handleEllissoideChange=function(t){return e.setState({ellissoide:t.target.value})},e.handleTipoStazioneChange=function(t){return e.setState({tipo_stazione:t.target.value})},e.handleAltezzaMareChange=function(t,a){return e.setState({altezza_lv_mare:a})},e.handleResponsabileChange=function(t,a){return e.setState(Object(u.a)({},a,t.target.value))},e.handleOperatoreInstallazioneChange=function(t,a){return e.setState(Object(u.a)({},a,t.target.value))},e.handleNotaChange=function(t){return e.setState({note_aggiuntive:t.target.value})},e.makeRequestInsert=function(){var t=e.state;if(""===t.codice_stazione||""===t.tipo_stazione||!t.latitudine.includes(".")||""===t.latitudine||!t.longitudine.includes(".")||""===t.longitudine||""===t.responsabile_1||""===t.operatore_installazione)return e.setState((function(e){return e.registrazione.chiamata=!0})),e.setState((function(e){return e.registrazione.stato=!1})),void e.setState((function(e){return e.registrazione.messaggio="Alcuni campi sono errati, seguire indicazioni!"}));A.a.post("api/Stazione",{codice_stazione:t.codice_stazione,tipo_stazione:t.tipo_stazione,periodo_manutenzione:t.periodo_manutenzione,latitudine:t.latitudine,longitudine:t.longitudine,ellissoide:t.ellissoide,altezza_lv_mare:t.altezza_lv_mare,responsabile_1:t.responsabile_1,responsabile_2:t.responsabile_2,responsabile_3:t.responsabile_3,responsabile_4:t.responsabile_4,note_aggiuntive:t.note_aggiuntive,operatore_installazione:t.operatore_installazione}).then((function(t){e.setState((function(e){return e.registrazione.chiamata=!0})),200!==t.data.operationCode?(e.setState((function(e){return e.registrazione.stato=!1})),e.setState((function(e){return e.registrazione.messaggio=t.data.message}))):e._isMounted&&(e.setState((function(e){return e.registrazione.stato=!0})),e.setState((function(e){return e.registrazione.messaggio="Registrazione avvenuta con successo"})))}))},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,A.a.get("api/Operatori/selecter").then((function(t){console.log(t.data),e._isMounted&&e.setState({operatori_list:t.data.items})})).catch((function(){e._isMounted&&e.setState({database_operatori:["Default"]})}))}},{key:"render",value:function(){var e=this;return console.log(this.state),l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{display:"flex",justifyContent:"flex-end"},l.a.createElement(ct.a,{title:"Add","aria-label":"add",style:{zIndex:2}},l.a.createElement(st.a,{onClick:this.handleOpen,style:{position:"relative"},color:"secondary"},l.a.createElement(it.a,null)))),l.a.createElement(ze.a,{open:this.state.modalOpen,onClose:this.handleClose,closeOnDimmerClick:!1,centered:!1},l.a.createElement(ze.a.Header,null,"Crea una nuova stazione"),l.a.createElement(ze.a.Content,{scrolling:!0},l.a.createElement(ze.a.Description,null,l.a.createElement(ge.a,null,l.a.createElement(ge.a.Row,{columns:4},l.a.createElement(ge.a.Column,null,l.a.createElement(_.a,{id:"codice_stazione_textfield",value:this.state.codice_stazione,onChange:this.handleCodiceStazioneChange,label:"Nome Stazione",variant:"outlined",required:!0,fullWidth:!0,helperText:"*Campo Richiesto"})),l.a.createElement(ge.a.Column,null,l.a.createElement(f,{properties:{labelId:"label-selecter-id",id:"selecter",inputLabel:"Tipo Stazione",style:{flexGrow:1},value:this.state.tipo_stazione,customHandler:this.handleTipoStazioneChange,helperText:"*Campo richiesto",name:"tipo_stazione",required:!0,error:!1},items:[{key:"Analogica",value:"Analogica"},{key:"Digitale",value:"Digitale"}]})),l.a.createElement(ge.a.Column,null,l.a.createElement(f,{properties:{labelId:"label-selecter-id",id:"selecter",inputLabel:"Operatore Installazione",style:{flexGrow:1},value:this.state.operatore_installazione,required:!0,helperText:"*Campo richiesto",customHandler:this.handleResponsabileChange,name:"operatore_installazione",error:!1},items:this.state.operatori_list})),l.a.createElement(ge.a.Column,null,l.a.createElement($.a,{id:"discrete-slider-small-steps",gutterBottom:!0},"Mesi validit\xe0 Manutenzione"),l.a.createElement(mt.a,{defaultValue:1,getAriaValueText:function(){return"$(value)M"},"aria-labelledby":"discrete-slider-small-steps",step:1,value:this.state.periodo_manutenzione,onChange:function(t,a){return e.setState({periodo_manutenzione:a})},marks:!0,min:1,max:12,valueLabelDisplay:"auto"}))),l.a.createElement(ut.a,{horizontal:!0},l.a.createElement(rt.a,{as:"h4"},l.a.createElement(pe.a,{name:"info"}),"Informazioni Utili")),l.a.createElement(ge.a.Row,{columns:2},l.a.createElement(ge.a.Column,{width:11},l.a.createElement(ge.a,null,l.a.createElement(ge.a.Row,{centered:!0,columns:1},l.a.createElement("h4",null,"Localizzazione")),l.a.createElement(ge.a.Row,{columns:2},l.a.createElement(ge.a.Column,{width:7},l.a.createElement(_.a,{id:"codice_stazione_textfield",label:"Latitudine (Decimale)",variant:"outlined",required:!0,fullWidth:!0,helperText:"*Campo Richiesto, separatore: '.'",value:this.state.latitudine,onChange:this.handleLatitudineChange})),l.a.createElement(ge.a.Column,{width:7},l.a.createElement(_.a,{id:"codice_stazione_textfield",label:"Longitudine (Decimale)",variant:"outlined",required:!0,fullWidth:!0,helperText:"*Campo Richiesto, separatore: '.'",value:this.state.longitudine,onChange:this.handleLongitudineChange}))),l.a.createElement(ge.a.Row,null,l.a.createElement(ge.a.Column,{width:3},l.a.createElement(_.a,{id:"ellissoide_textfield",label:"Ellissoide",variant:"outlined",value:this.state.ellissoide,onChange:this.handleEllissoideChange}))))),l.a.createElement(ge.a.Column,{width:5},l.a.createElement(ge.a,{style:{height:"100%"}},l.a.createElement(ge.a.Row,{columns:1,style:{height:"20%"},textAlign:"justified"},l.a.createElement(ge.a.Column,{textAlign:"center",centered:!0},l.a.createElement($.a,{id:"vertical-slider",gutterBottom:!0},l.a.createElement("h4",null,"Altezza Lv. Mare (mt.)")))),l.a.createElement(ge.a.Row,{columns:2,style:{height:"80%"},textAlign:"justified"},l.a.createElement(ge.a.Column,{textAlign:"center",centered:!0},l.a.createElement(mt.a,{style:{maxHeight:"100%"},orientation:"vertical",defaultValue:0,getAriaValueText:function(e){return e+"mt."},"aria-labelledby":"discrete-slider-small-steps",step:50,marks:!0,min:-100,max:1e3,valueLabelDisplay:"auto",value:this.state.altezza_lv_mare,onChange:this.handleAltezzaMareChange})),l.a.createElement(ge.a.Column,{width:5},l.a.createElement(_.a,{id:"altezza-lv-mare_textfield",value:this.state.altezza_lv_mare,onChange:function(t){e.handleAltezzaMareChange(t,t.target.value)}})))))),l.a.createElement(ut.a,{horizontal:!0},l.a.createElement(rt.a,{as:"h4"},l.a.createElement(pe.a,{name:"user"}),"Responsabili")),l.a.createElement(ge.a.Row,{columns:4},l.a.createElement(ge.a.Column,null,l.a.createElement(f,{properties:{labelId:"label-selecter-id",id:"selecter",inputLabel:"Responsabile 1",style:{flexGrow:1},value:this.state.responsabile_1,customHandler:this.handleResponsabileChange,helperText:"*Campo richiesto",required:!0,name:"responsabile_1",error:!1},items:this.state.operatori_list})),l.a.createElement(ge.a.Column,null,l.a.createElement(f,{properties:{labelId:"label-selecter-id",id:"selecter",inputLabel:"Responsabile 2",style:{flexGrow:1},value:this.state.responsabile_2,customHandler:this.handleResponsabileChange,helperText:"",name:"responsabile_2",error:!1},items:this.state.operatori_list})),l.a.createElement(ge.a.Column,null,l.a.createElement(f,{properties:{labelId:"label-selecter-id",id:"selecter",inputLabel:"Responsabile 3",style:{flexGrow:1},value:this.state.responsabile_3,customHandler:this.handleResponsabileChange,helperText:"",name:"responsabile_3",error:!1},items:this.state.operatori_list})),l.a.createElement(ge.a.Column,null,l.a.createElement(f,{properties:{labelId:"label-selecter-id",id:"selecter",inputLabel:"Responsabile 4",style:{flexGrow:1},value:this.state.responsabile_4,customHandler:this.handleResponsabileChange,helperText:"",name:"responsabile_4",error:!1},items:this.state.operatori_list}))),l.a.createElement(ut.a,{horizontal:!0},l.a.createElement(rt.a,{as:"h4"},l.a.createElement(pe.a,{name:"sticky note outline"}),"Note aggiuntive")),l.a.createElement(ge.a.Row,{columns:1},l.a.createElement(ge.a.Column,null,l.a.createElement(_.a,{variant:"outlined",id:"standard-multiline-static",label:"Note",multiline:!0,rows:5,placeholder:"Inserisci nota qui..",fullWidth:!0,value:this.state.note_aggiuntive,onChange:this.handleNotaChange})))))),l.a.createElement(ze.a.Actions,null,l.a.createElement(he.a,{negative:!0,onClick:function(){e.handleCancelOperation()}},"Cancella"),l.a.createElement(he.a,{onClick:function(){return e.makeRequestInsert()},positive:!0,labelPosition:"right",icon:"checkmark",content:"Salva"})),l.a.createElement("div",null,this.state.registrazione.chiamata?l.a.createElement(I.a,{open:this.state.registrazione.chiamata,autoHideDuration:2e3,onClose:this.handleClose},l.a.createElement(M.a,{elevation:9,variant:"filled",severity:this.state.registrazione.stato?"success":"error"},this.state.registrazione.messaggio)):l.a.createElement("div",null))))}}]),a}(n.Component),pt=a(223),ht=a.n(pt),Et=a(184),gt=a(183),ft=new Date,vt=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.today=new Date,n.handleClose=function(){var e=n.state.registration;console.log(e.state),e.serverCall?(e.serverCall=!1,e.state?(e.state=!1,n.setState({registration:e}),n.resetData(),n.props.handleClose()):n.setState({registration:e})):(n.resetData(),n.props.handleClose())},n.resetData=function(){var e=n.state.componentCheck;e.verified=!1,e.message="*Campo Richiesto";var t=n.state.component;t.produttore="",t.nome="",t.larghezza="",t.altezza="",t.profondita="",n.setState({operationType:"Installazione",startOperationDate:ft.getFullYear()+"/"+(ft.getMonth()+1)+"/"+ft.getDate(),endOperationDate:ft.getFullYear()+"/"+(ft.getMonth()+1)+"/"+ft.getDate(),componentSerial:"",componentCheckEnabled:!1,operator:"",note:"",componentCheck:e,component:t})},n.handleTipoOperazioneChange=function(e){"Altro"!==e.target.value?(n.setState((function(e){return e.componentCheck.verified=!1})),n.setState((function(e){return e.componentCheck.message="Verifica"})),n.setState({componentCheckEnabled:!1})):(n.setState((function(e){return e.componentCheck.verified=!0})),n.setState((function(e){return e.componentCheck.message="Non necessario"})),n.setState({componentCheckEnabled:!0})),n.setState({operationType:e.target.value})},n.handleSerialeChange=function(e){return n.setState({componentSerial:e.target.value})},n.handleDateInzioOperazioniChange=function(e){e instanceof Date&&!isNaN(e)&&(n.setState({startOperationDate:e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()}),n.setState({endOperationDate:e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()}))},n.handleDateFineOperazioniChange=function(e){e instanceof Date&&!isNaN(e)&&n.setState({endOperationDate:e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()})},n.handleOperatoreIncaricatoChange=function(e){return n.setState({operator:e.target.value})},n.handleNotaChange=function(e){return n.setState({note:e.target.value})},n.handleCheckComponenteSeriale=function(){var e=n.state.component;A.a.get("api/Stazione/"+n.props.stationId+"/Componente/"+n.state.componentSerial).then((function(t){404!==t.data.operationCode?("Installazione"===n.state.operationType?(n.setState((function(e){return e.componentCheck.verified=!1})),n.setState((function(e){return e.componentCheck.message="Gi\xe0 installato!"}))):(n.setState((function(e){return e.componentCheck.verified=!0})),n.setState((function(e){return e.componentCheck.message="Ok!"}))),e.produttore=t.data.item.produttore,e.nome=t.data.item.nome,e.larghezza=t.data.item.larghezza_mm,e.altezza=t.data.item.altezza_mm,e.profondita=t.data.item.profondita_mm,n.setState({component:e})):A.a.get("api/Componente/"+n.state.componentSerial).then((function(t){404!==t.data.operationCode?("Installazione"===n.state.operationType&&t.data.possible_to_install?(n.setState((function(e){return e.componentCheck.verified=!0})),n.setState((function(e){return e.componentCheck.message="Installabile!"}))):"Installazione"!==n.state.operationType&&t.data.possible_to_install?(n.setState((function(e){return e.componentCheck.verified=!1})),n.setState((function(e){return e.componentCheck.message="Non presente in stazione!"}))):(n.setState((function(e){return e.componentCheck.verified=!1})),n.setState((function(e){return e.componentCheck.message="Installato in altra stazione!"}))),e.produttore=t.data.item.produttore,e.nome=t.data.item.nome,e.larghezza=t.data.item.larghezza_mm,e.altezza=t.data.item.altezza_mm,e.profondita=t.data.item.profondita_mm,n.setState({component:e})):(n.setState((function(e){return e.componentCheck.verified=!1})),n.setState((function(e){return e.componentCheck.message="Questo seriale non appartiene a nessun componente"})))}))}))},n.addOperation=function(){var e=n.state;if(""===e.operationType||""===e.startOperationDate||""===e.endOperationDate||!e.componentCheck.verified||""===e.operator||""===e.componentSerial&&"Altro"!==e.operationType)return n.setState((function(e){return e.registration.serverCall=!0})),n.setState((function(e){return e.registration.state=!1})),void n.setState((function(e){return e.registration.message="Campi richiesti non inseriti!"}));A.a.post("api/Stazione/"+n.props.stationId+"/Operazione",{tipo_operazione:e.operationType,data_inizio_operazione:e.startOperationDate,data_fine_operazione:e.endOperationDate,seriale_componente:"Altro"!==n.state.operationType?e.componentSerial:"",operatore_incaricato:e.operator,note:e.note}).then((function(e){console.log(e),200!==e.data.operationCode?(n.setState((function(e){return e.registration.state=!1})),n.setState((function(t){return t.registration.message=e.data.message}))):(n.setState((function(e){return e.registration.state=!0})),n.setState((function(e){return e.registration.message="Registrazione avvenuta con successo"}))),n.setState((function(e){return e.registration.serverCall=!0}))}))},n.state={operationType:"Installazione",startOperationDate:ft.getFullYear()+"/"+(ft.getMonth()+1)+"/"+ft.getDate(),endOperationDate:ft.getFullYear()+"/"+(ft.getMonth()+1)+"/"+ft.getDate(),componentSerial:"",componentCheck:{verified:!1,message:"*Campo Richiesto"},registration:{serverCall:!1,state:!1,message:""},component:{produttore:"",nome:"",larghezza:"",altezza:"",profondita:""},componentCheckEnabled:!1,operator:"",note:""},n}return Object(s.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.open!==this.props.open&&this.setState({modalOpen:e.open})}},{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this._isMounted&&this.setState({startOperationDate:this.today.getFullYear()+"/"+(this.today.getMonth()+1)+"/"+this.today.getDate(),endOperationDate:this.today.getFullYear()+"/"+(this.today.getMonth()+1)+"/"+this.today.getDate()}),A.a.get("api/Operatori/selecter").then((function(t){console.log(t.data),e._isMounted&&e.setState({operatori_list:t.data.items})})).catch((function(){e._isMounted&&e.setState({database_operatori:["Default"]})}))}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ze.a,{open:this.state.modalOpen,centered:!1,closeOnDimmerClick:!1},l.a.createElement(ze.a.Header,null,"Aggiungi nuova operazione per la stazione : ",this.props.stationId),l.a.createElement(ze.a.Content,{scrolling:!0},l.a.createElement(ze.a.Description,null,l.a.createElement(ge.a,null,l.a.createElement(ge.a.Row,{columns:3},l.a.createElement(ge.a.Column,null,l.a.createElement(f,{properties:{labelId:"label-selecter-id",id:"selecter",inputLabel:"Tipo Operazione",style:{flexGrow:1},value:this.state.operationType,customHandler:this.handleTipoOperazioneChange,helperText:"*Campo richiesto",name:"tipo_stazione",error:!1},items:[{key:"Installazione",value:"Installazione"},{key:"Manutenzione",value:"Manutenzione"},{key:"Rimozione",value:"Rimozione"},{key:"Altro",value:"Altro"}]})),l.a.createElement(ge.a.Column,null,l.a.createElement(z,{properties:{width:"90%",id:"datainizio_picker",label:"Data Inizio Operazione",name:"data_inizio_op"},onChange:this.handleDateInzioOperazioniChange})),l.a.createElement(ge.a.Column,null,l.a.createElement(z,{properties:{width:"90%",id:"datafine_picker",label:"Data Fine Operazione",name:"data_fine_op"},onChange:this.handleDateFineOperazioniChange}))),l.a.createElement(ut.a,{horizontal:!0},l.a.createElement(rt.a,{as:"h4"},l.a.createElement(pe.a,{name:"setting"}),"Selezione Componente")),l.a.createElement(ge.a.Row,{style:{paddingBottom:0}},l.a.createElement(ge.a.Column,{width:5},l.a.createElement(_.a,{id:"componentSerial_textfield",label:"N. Seriale Componente",variant:"outlined",required:!0,helperText:this.state.componentCheck.message,error:!this.state.componentCheck.verified,value:this.state.componentCheckEnabled?"":this.state.componentSerial,onChange:this.handleSerialeChange,disabled:this.state.componentCheckEnabled})),l.a.createElement(ge.a.Column,{width:2},l.a.createElement(se.a,{"aria-label":"delete",onClick:this.handleCheckComponenteSeriale,disabled:this.state.componentCheckEnabled},l.a.createElement(ht.a,{fontSize:"large",style:this.state.componentCheck.verified?{color:Et.a[500]}:{color:gt.a[500]}}))),l.a.createElement(ge.a.Column,{width:6,floated:"right"},l.a.createElement(_.a,{disabled:!0,id:"produttore_textfield",value:this.state.componentCheckEnabled?"":this.state.component.produttore,label:"Produttore",variant:"standard",fullWidth:!0}))),l.a.createElement(ge.a.Row,{style:{paddingBottom:0,paddingTop:0}},l.a.createElement(ge.a.Column,{width:6,floated:"right"},l.a.createElement(_.a,{disabled:!0,id:"nome_textfield",value:this.state.componentCheckEnabled?"":this.state.component.nome,label:"Nome Componente",variant:"standard",fullWidth:!0}))),l.a.createElement(ge.a.Row,{style:{paddingBottom:0,paddingTop:0}},l.a.createElement(ge.a.Column,{width:6,floated:"right"},l.a.createElement(_.a,{disabled:!0,id:"larghezza_textfield",value:this.state.componentCheckEnabled?"":this.state.component.larghezza,label:"Larghezza (mm)",variant:"standard",fullWidth:!0}))),l.a.createElement(ge.a.Row,{style:{paddingBottom:0,paddingTop:0}},l.a.createElement(ge.a.Column,{width:6,floated:"right"},l.a.createElement(_.a,{disabled:!0,id:"altezza_textfield",value:this.state.componentCheckEnabled?"":this.state.component.altezza,label:"Altezza (mm)",variant:"standard",fullWidth:!0}))),l.a.createElement(ge.a.Row,{style:{paddingBottom:0,paddingTop:0}},l.a.createElement(ge.a.Column,{width:6,floated:"right"},l.a.createElement(_.a,{disabled:!0,id:"profondita_textfield",value:this.state.componentCheckEnabled?"":this.state.component.profondita,label:"Profondit\xe0 (mm)",variant:"standard",fullWidth:!0}))),l.a.createElement(ut.a,{horizontal:!0},l.a.createElement(rt.a,{as:"h4"},l.a.createElement(pe.a,{name:"user"}),"Operatore Incaricato")),l.a.createElement(ge.a.Row,null,l.a.createElement(ge.a.Column,{width:6},l.a.createElement(f,{properties:{labelId:"label-selecter-id",id:"selecter",inputLabel:"Operatore",style:{flexGrow:1},value:this.state.operator,customHandler:this.handleOperatoreIncaricatoChange,helperText:"*Campo richiesto",required:!0,name:"Operatore",error:!1},items:this.state.operatori_list}))),l.a.createElement(ut.a,{horizontal:!0},l.a.createElement(rt.a,{as:"h4"},l.a.createElement(pe.a,{name:"sticky note outline"}),"Note Operazione")),l.a.createElement(ge.a.Row,{columns:1},l.a.createElement(ge.a.Column,null,l.a.createElement(_.a,{variant:"outlined",id:"standard-multiline-static",label:"Note",multiline:!0,rows:5,placeholder:"Inserisci nota qui..",fullWidth:!0,onChange:this.handleNotaChange,value:this.state.note})))))),l.a.createElement(ze.a.Actions,null,l.a.createElement(he.a,{negative:!0,onClick:this.handleClose},"Cancella"),l.a.createElement(he.a,{onClick:function(){e.addOperation()},positive:!0,labelPosition:"right",icon:"checkmark",content:"Salva"})),l.a.createElement("div",null,this.state.registration.serverCall?l.a.createElement(I.a,{open:this.state.registration.serverCall,autoHideDuration:500,onClose:this.handleClose},l.a.createElement(M.a,{elevation:9,variant:"filled",severity:this.state.registration.state?"success":"error"},this.state.registration.message)):l.a.createElement("div",null))))}}]),a}(n.Component),bt=a(373),Ct=a(705),yt=a(696),zt=a(361),wt=a.n(zt),St=a(362),xt=a.n(St),_t=a(363),kt=a.n(_t),It=(a(327),a(687)),Ot=a(691),At=a(690),Mt=a(686),Rt=a(688),Dt=a(689),jt=a(230),Tt=a.n(jt),Nt=function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(e){var l;Object(i.a)(this,n),(l=t.call(this,e))._isMounted=!1,l.handleDataStationXmlLowBound=function(e){var t=l.state.stationxml_filter;t.from=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate(),l.setState({stationxml_filter:t})},l.handleDataStationXmlUpperBound=function(e){var t=l.state.stationxml_filter;t.to=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate(),l.setState({stationxml_filter:t})},l.getStationXml=function(){var e=a(326);A.a.get("api/Stazione/"+l.props.stationId+"/StationXml",{params:{data_creazione_canale:l.state.stationxml_filter.from,data_dismessa_canale:l.state.stationxml_filter.to}}).then((function(t){console.log(t),"application/xml; charset=utf-8"===t.headers["content-type"]?e(t.data,"filename.xml"):l.setState({errore_download:!0})}))},l.getStazione=function(){console.log("api/Stazione/"+l.props.stationId),A.a.get("api/Stazione/"+l.props.stationId).then((function(e){console.log(e.data.item),l._isMounted&&l.setState({heightAboveSeaLevel:e.data.item.altezza_lv_mare,maintenancePeriod:e.data.item.frequenza_manutenzione,stationType:e.data.item.tipo_stazione,note:e.data.nota,supervisors:e.data.responsabili,geoLocationsHistory:e.data.storico_coordinate})}))};var r=new Date;return l.state={stationxml_filter:{from:r.getFullYear()+"/"+(r.getMonth()+1)+"/"+r.getDate(),to:r.getFullYear()+"/"+(r.getMonth()+1)+"/"+r.getDate()},heightAboveSeaLevel:null,maintenancePeriod:"",stationType:"",note:"",supervisors:[],geoLocationsHistory:[]},l}return Object(s.a)(n,[{key:"componentDidUpdate",value:function(e,t){this.props.stationId!==e.stationId&&this.getStazione()}},{key:"componentWillMount",value:function(){this._isMounted=!0,this.getStazione()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(ge.a,{padded:!0},l.a.createElement(ge.a.Row,{columns:1},l.a.createElement(ge.a.Column,{width:5,floated:"right"},l.a.createElement("h1",null,this.props.stationId))),l.a.createElement(ge.a.Row,{columns:1},l.a.createElement(ge.a.Column,{width:3},l.a.createElement("h4",null,"Altezza livello mare:")),l.a.createElement(ge.a.Column,{width:13},l.a.createElement("h5",null,this.state.heightAboveSeaLevel," mt."))),l.a.createElement(ge.a.Row,{columns:1},l.a.createElement(ge.a.Column,{width:3},l.a.createElement("h4",null,"Frequenza manutenzione:")),l.a.createElement(ge.a.Column,{width:13},l.a.createElement("h5",null,this.state.maintenancePeriod," mese/i"))),l.a.createElement(ge.a.Row,{columns:1},l.a.createElement(ge.a.Column,{width:3},l.a.createElement("h4",null,"Tipologia stazione:")),l.a.createElement(ge.a.Column,{width:13},l.a.createElement("h5",null,this.state.stationType))),l.a.createElement(ge.a.Row,{columns:2},l.a.createElement(ge.a.Column,{width:3},l.a.createElement("h4",null,"Nota stazione:")),l.a.createElement(ge.a.Column,{width:13},l.a.createElement("h5",null,this.state.note))),l.a.createElement(ge.a.Row,{columns:1+this.state.supervisors.length},l.a.createElement(ge.a.Column,{width:3},l.a.createElement("h4",null,"Responsabili:")),this.state.supervisors.map((function(e){return l.a.createElement(ge.a.Column,{width:3},l.a.createElement("h5",null,e))}))),l.a.createElement(ut.a,{horizontal:!0},l.a.createElement(rt.a,{as:"h4"},l.a.createElement(Tt.a,{style:{paddingRight:3}}),"Storico Coordinate")),l.a.createElement(ge.a.Row,{centered:!0},l.a.createElement(ge.a.Column,{width:13,textAlign:"center"},l.a.createElement(U.a,null,l.a.createElement(Mt.a,{component:U.a},l.a.createElement(It.a,{"aria-label":"simple table"},l.a.createElement(Rt.a,null,l.a.createElement(Dt.a,null,l.a.createElement(At.a,null,"Rilevazione"),l.a.createElement(At.a,null,"Latitudine"),l.a.createElement(At.a,null,"Longitudine"),l.a.createElement(At.a,null,"Ellissoide rif."))),l.a.createElement(Ot.a,null,this.state.geoLocationsHistory.map((function(e){return l.a.createElement(Dt.a,{key:e.id},l.a.createElement(At.a,null,e.ultimo_aggiornamento),l.a.createElement(At.a,null,e.latitudine),l.a.createElement(At.a,null,e.longitudine),l.a.createElement(At.a,null,e.ellissoide))})))))))),l.a.createElement(ut.a,{horizontal:!0},l.a.createElement(rt.a,{as:"h4"},l.a.createElement(Tt.a,{style:{paddingRight:3}}),"Storico StationXml")),l.a.createElement(ge.a.Row,{centered:!0,columns:3},l.a.createElement(ge.a.Column,{textAlign:"center"},l.a.createElement(z,{properties:{width:"90%",id:"da_picker",label:"Da",name:"stationxml_da"},onChange:this.handleDataStationXmlLowBound})),l.a.createElement(ge.a.Column,{textAlign:"center"},l.a.createElement(z,{properties:{width:"90%",id:"a_picker",label:"A",name:"stationxml_a"},onChange:this.handleDataStationXmlUpperBound})),l.a.createElement(ge.a.Column,{textAlign:"center"},l.a.createElement(he.a,{style:{marginTop:"4%",backgroundColor:"#3f51b5",color:"white"},onClick:this.getStationXml},l.a.createElement("h4",{color:"white"},"Scarica StationXml"))))))}}]),n}(l.a.Component),qt=a(364),Ft=a.n(qt),Wt=a(45),Lt=a(358),Gt=a.n(Lt),Ut=a(357),Pt=a.n(Ut),Ht=a(612),Bt=a(692),Vt=a(693),Xt=a(718),Yt=a(232),Qt=a.n(Yt),Zt=a(234),Jt=a.n(Zt),Kt=a(233),$t=a.n(Kt),ea=a(231),ta=a.n(ea),aa=Object(oe.a)((function(e){return{root:{flexShrink:0,marginLeft:e.spacing(2.5)}}}));function na(e){var t=aa(),a=Object(Wt.a)(),n=e.count,r=e.page,o=e.rowsPerPage,i=e.onChangePage;return l.a.createElement("div",{className:t.root},l.a.createElement(se.a,{onClick:function(e){i(e,0)},disabled:0===r,"aria-label":"first page"},"rtl"===a.direction?l.a.createElement(ta.a,null):l.a.createElement(Qt.a,null)),l.a.createElement(se.a,{onClick:function(e){i(e,r-1)},disabled:0===r,"aria-label":"previous page"},"rtl"===a.direction?l.a.createElement($t.a,null):l.a.createElement(Jt.a,null)),l.a.createElement(se.a,{onClick:function(e){i(e,r+1)},disabled:r>=Math.ceil(n/o)-1,"aria-label":"next page"},"rtl"===a.direction?l.a.createElement(Jt.a,null):l.a.createElement($t.a,null)),l.a.createElement(se.a,{onClick:function(e){i(e,Math.max(0,Math.ceil(n/o)-1))},disabled:r>=Math.ceil(n/o)-1,"aria-label":"last page"},"rtl"===a.direction?l.a.createElement(Qt.a,null):l.a.createElement(ta.a,null)))}var la=Object(oe.a)({table:{flexGrow:1}});function ra(e){var t=e.operation,a=e.startDate,n=e.endDate,r=l.a.useState(),o=Object(Le.a)(r,2),i=o[0],s=o[1];return l.a.useEffect((function(){s(e.collapseAll)}),[e.collapseAll]),l.a.createElement(l.a.Fragment,null,l.a.createElement(Dt.a,null,l.a.createElement(At.a,null,l.a.createElement(se.a,{"aria-label":"expand row",size:"small",onClick:function(){return s(!i)}},i?l.a.createElement(Pt.a,null):l.a.createElement(Gt.a,null))),l.a.createElement(At.a,{align:"center"},t.componente.seriale),l.a.createElement(At.a,{align:"center"},t.operazione.tipo_operazione),l.a.createElement(At.a,{align:"center"},t.operatore.nome_cognome),l.a.createElement(At.a,{align:"center"},a.getFullYear()+"/"+(a.getMonth()+1)+"/"+a.getDate()),l.a.createElement(At.a,{align:"center"},""!==n?n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate():"")),l.a.createElement(Dt.a,{style:{width:"50%"}},l.a.createElement(At.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6},l.a.createElement(Ht.a,{in:i,timeout:"auto",unmountOnExit:!0},l.a.createElement(w.a,{justifyContent:"center",display:"flex"},"Note : ",t.operatore.note)))))}function oa(e){var t=la(),a=l.a.useState(!1),r=Object(Le.a)(a,2),o=r[0],i=r[1],s=l.a.useState(0),c=Object(Le.a)(s,2),m=c[0],u=c[1],d=l.a.useState(5),p=Object(Le.a)(d,2),h=p[0],E=p[1],g=l.a.useState([]),f=Object(Le.a)(g,2),v=f[0],b=f[1],C=l.a.useState(!1),y=Object(Le.a)(C,2),z=y[0],S=y[1];function x(){A.a.get("api/Stazione/"+e.stationId+"/Operazioni").then((function(e){console.log(e.data.data),b(e.data.data)}))}Object(n.useEffect)((function(){x()}),[e.stationId]);return l.a.createElement(w.a,{display:"flex",width:"100%",height:"100%",flexDirection:"column"},l.a.createElement(vt,{open:z,handleClose:function(){S(!1),x(),e.forceRender("")},stationId:e.stationId}),l.a.createElement(st.a,{variant:"extended",color:"primary",style:{width:"90%",margin:"10px auto 10px auto",minHeight:"5vh"},onClick:function(){return S(!0)}},l.a.createElement(it.a,null),"Aggiungi Operazione"),l.a.createElement(ge.a,null,l.a.createElement(ge.a.Row,{columns:1},l.a.createElement(ge.a.Column,{floated:"left"},l.a.createElement(G.a,{control:l.a.createElement(Bt.a,{checked:o,onChange:function(e){console.log(o),i(e.target.checked)}}),label:"Visualizza tabella estesa"}))),l.a.createElement(ge.a.Row,{columns:1},l.a.createElement(ge.a.Column,{width:16},l.a.createElement(U.a,{style:{overflowY:"auto",overflowX:"auto"}},l.a.createElement(Mt.a,{component:w.a},l.a.createElement(It.a,{className:t.table,size:"small","aria-label":"simple table"},l.a.createElement(Rt.a,null,l.a.createElement(Dt.a,null,l.a.createElement(At.a,{align:"center",size:"small"}),l.a.createElement(At.a,{align:"center",size:"small"},"Seriale"),l.a.createElement(At.a,{align:"center",size:"small"},"Tipo Operazione"),l.a.createElement(At.a,{align:"center",size:"small"},"Operatore"),l.a.createElement(At.a,{align:"center",size:"small"},"Data Inizio Operazione"),l.a.createElement(At.a,{align:"center",size:"small"},"Data Fine Operazione"))),l.a.createElement(Ot.a,null,(h>0?v.slice(m*h,m*h+h):v).map((function(e){var t=null!==e.operazione.data_fine_operazione?new Date(e.operazione.data_fine_operazione):"",a=null!==e.operazione.data_inizio_operazione?new Date(e.operazione.data_inizio_operazione):"";return l.a.createElement(ra,{operation:e,collapseAll:o,startDate:a,endDate:t})}))),l.a.createElement(Vt.a,null,l.a.createElement(Dt.a,null,l.a.createElement(Xt.a,{rowsPerPageOptions:[5,10,25,{label:"Tutte",value:-1}],colSpan:3,count:v.length,rowsPerPage:h,page:m,labelRowsPerPage:"Righe per pagina",SelectProps:{inputProps:{"aria-label":"Righe per pagina"},native:!0},onChangePage:function(e,t){u(t)},onChangeRowsPerPage:function(e){E(parseInt(e.target.value,10)),u(0)},ActionsComponent:na}))))))))))}var ia=a(360),sa=a.n(ia),ca=a(77),ma=a.n(ca),ua=a(702),da=a(359),pa=a.n(da),ha=a(719),Ea=a(694),ga=a(708),fa=a(695),va=Object(oe.a)((function(e){return{root:{width:"100%"},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2),marginTop:e.spacing(3),float:"right"},resetContainer:{padding:e.spacing(3)}}}));function ba(e){var t=new Date,a=va(),n=l.a.useState(0),r=Object(Le.a)(n,2),o=r[0],i=r[1],s=["Seleziona Canale e Acquisitore","Informazioni Aggiuntive","Conferma"],c=l.a.useState(t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()),m=Object(Le.a)(c,2),u=m[0],d=m[1],p=l.a.useState(""),h=Object(Le.a)(p,2),E=h[0],g=h[1],v=l.a.useState(""),b=Object(Le.a)(v,2),C=b[0],y=b[1],w=l.a.useState(0),S=Object(Le.a)(w,2),x=S[0],k=S[1],I=l.a.useState("HHN"),O=Object(Le.a)(I,2),M=O[0],R=O[1],D=l.a.useState(0),j=Object(Le.a)(D,2),T=j[0],N=j[1],q=l.a.useState(0),F=Object(Le.a)(q,2),W=F[0],L=F[1],G=l.a.useState(0),P=Object(Le.a)(G,2),H=P[0],B=P[1],V=l.a.useState(""),X=Object(Le.a)(V,2),Y=X[0],Q=X[1],Z=function(){i((function(e){return e+1}))},J=function(){i((function(e){return e-1}))},K=function(e){d(e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate())},ee=function(e){g(e.target.value)},te=function(e){y(e.target.value)},ae=function(e){k(e.target.value)},ne=function(e){R(e.target.value)},le=function(e){N(e.target.value)},re=function(e){L(e.target.value)},oe=function(e){B(e.target.value)},ie=function(e){Q(e.target.value)},se=function(e){switch(e){case 0:return""!==E&&""!==C;case 1:default:return!0}};return l.a.createElement("div",{className:a.root},l.a.createElement(ha.a,{activeStep:o,orientation:"vertical"},s.map((function(t,n){return l.a.createElement(Ea.a,{key:t},l.a.createElement(ga.a,null,t),l.a.createElement(fa.a,null,l.a.createElement("div",null,function(t){var a=[],n=[];switch(t){case 0:return e.sensors.length>0&&e.sensors.map((function(e){return a.push({key:e.componente.seriale,value:e.componente.seriale}),!0})),e.dataloggers.map((function(e){return n.push({key:e.componente.seriale,value:e.componente.seriale}),!0})),l.a.createElement(ge.a,{padded:!0},l.a.createElement(ge.a.Row,{columns:3},l.a.createElement(ge.a.Column,null,l.a.createElement($.a,{variant:"h4",align:"center"},"Acquisitore")),l.a.createElement(ge.a.Column,null,l.a.createElement(f,{properties:{labelId:"label-selecter-acquisitore-seriale",id:"acquisitore-seriale-selecter",inputLabel:"Seriale",style:{flexGrow:1},value:C,customHandler:te,name:"dataloggersSerial",error:!1,helperText:"*Campo Richiesto",required:!0},items:n})),l.a.createElement(ge.a.Column,null,l.a.createElement(_.a,{variant:"outlined",id:"n_canale_textfield",label:"N. Canale",value:x,fullWidth:!0,onChange:ae}))),l.a.createElement(ge.a.Row,{columns:3},l.a.createElement(ge.a.Column,{verticalAlign:"center",textAlign:"center"},l.a.createElement($.a,{variant:"h4",align:"center"},"Sensore")),l.a.createElement(ge.a.Column,null,l.a.createElement(f,{properties:{labelId:"label-selecter-sensore-seriale",id:"selecter-sensore-seriale",inputLabel:"Seriale",style:{flexGrow:1},value:E,customHandler:ee,name:"sensorSerial",error:!1,helperText:"*Campo Richiesto",required:!0},items:a})),l.a.createElement(ge.a.Column,null,l.a.createElement(_.a,{id:"profondita_textfield",label:"Componente Sensore",variant:"outlined",value:M,fullWidth:!0,onChange:ne}))));case 1:return l.a.createElement(ge.a,{padded:!0},l.a.createElement(ge.a.Row,{columns:1},l.a.createElement(ge.a.Column,{width:5},l.a.createElement(_.a,{id:"loc_code_textfield",label:"Location Code",variant:"outlined",value:Y,fullWidth:!0,onChange:ie,required:!0}))),l.a.createElement(ge.a.Row,{columns:2},l.a.createElement(ge.a.Column,{width:5},l.a.createElement(_.a,{id:"inclinazione_textfield",label:"Inclinazione",variant:"outlined",value:T,fullWidth:!0,onChange:le,helperText:"Espressa in gradi"})),l.a.createElement(ge.a.Column,{width:5},l.a.createElement(_.a,{id:"azimuth_textfield",label:"Azimuth",variant:"outlined",value:W,fullWidth:!0,onChange:re,helperText:"Espresso in gradi"}))),l.a.createElement(ge.a.Row,{columns:1},l.a.createElement(ge.a.Column,{width:5},l.a.createElement(_.a,{id:"profondita_textfield",label:"Profondit\xe0",variant:"outlined",value:H,fullWidth:!0,onChange:oe,helperText:"Rispetto al piano della stazione Ex. -23"}))),l.a.createElement(ge.a.Row,{columns:1},l.a.createElement(ge.a.Column,{width:5},l.a.createElement(z,{properties:{width:"100%",id:"datafine_picker",label:"Data Creazione Canale",name:"data_fine_op"},onChange:K}))));case 2:return l.a.createElement(ge.a,{padded:!0},l.a.createElement(ge.a.Row,null,l.a.createElement(ge.a.Column,null,l.a.createElement($.a,{variant:"h4"},Y))),l.a.createElement(ge.a.Row,{columns:3},l.a.createElement(ge.a.Column,null,l.a.createElement($.a,{variant:"h4"},"Acquisitore")),l.a.createElement(ge.a.Column,null,l.a.createElement($.a,{variant:"h5"},"Seriale: ",C)),l.a.createElement(ge.a.Column,null,l.a.createElement($.a,{variant:"h5"},"N. Canale: ",x))),l.a.createElement(ge.a.Row,{columns:3},l.a.createElement(ge.a.Column,null,l.a.createElement($.a,{variant:"h4"},"Sensore")),l.a.createElement(ge.a.Column,null,l.a.createElement($.a,{variant:"h5"},"Seriale: ",E)),l.a.createElement(ge.a.Column,null,l.a.createElement($.a,{variant:"h5"},"Componente: ",M))),l.a.createElement(ge.a.Row,{columns:3},l.a.createElement(ge.a.Column,null,l.a.createElement($.a,{variant:"h5"},"Inclinazione: ",T,"\xb0")),l.a.createElement(ge.a.Column,null,l.a.createElement($.a,{variant:"h5"},"Azimuth: ",W,"\xb0")),l.a.createElement(ge.a.Column,null,l.a.createElement($.a,{variant:"h5"},"Profondit\xe0: ",H," mt."))),l.a.createElement(ge.a.Row,null,l.a.createElement(ge.a.Column,null,l.a.createElement($.a,{variant:"h5"},"Data Creazione: ",u))));default:return"Unknown step"}}(n)),l.a.createElement("div",{className:a.actionsContainer},l.a.createElement("div",null,l.a.createElement(he.a,{disabled:0===o,onClick:J,className:a.button},"Indietro"),l.a.createElement(he.a,{variant:"contained",color:"primary",onClick:Z,className:a.button,disabled:!se(o)},o===s.length-1?"Conferma":"Avanti")))))}))),o===s.length&&l.a.createElement(U.a,{square:!0,elevation:0,className:a.resetContainer},l.a.createElement($.a,null,"Hai completato tutti i passi, cliccando su Salva il nuovo canale verr\xe0 istanziato!"),l.a.createElement(he.a,{onClick:function(){A.a.post("api/Stazione/"+e.stationId+"/Canale",{seriale_sensore:E,seriale_acquisitore:C,n_canale_acquisitore:x,componente_sensore:M,inclinazione:T,azimuth:W,data_creazione_canale:u,profondita:H,location_code:Y}).then((function(t){200===t.data.operationCode&&e.handleClose()}))},positive:!0,labelPosition:"right",icon:"checkmark",content:"Salva"})))}var Ca=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.today=new Date,n.handleOpen=function(){n.state.sensors.length>0&&n.state.dataloggers.length>0&&n.setState({modalOpen:!0})},n.handleClose=function(){n.setState({modalOpen:!1}),n.props.callRender()},n.state={modalOpen:!1,current:0,sensors:[],dataloggers:[]},n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this;this.props.stationId!==e.stationId&&(A.a.get("api/Stazione/"+this.props.stationId+"/Sensori").then((function(e){console.log(e.data.items),404!==e.data.operationCode&&a.setState({sensors:e.data.items})})),A.a.get("api/Stazione/"+this.props.stationId+"/Acquisitori").then((function(e){404!==e.data.operationCode&&a.setState({dataloggers:e.data.items})})))}},{key:"componentWillMount",value:function(){this._isMounted=!0}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ct.a,{title:this.state.sensors.length>0&&this.state.dataloggers.length>0?"Aggiungi canale":"Non \xe8 possibile aggiungere un canale poich\xe8 a bordo della stazione mancano sensori o acquisitori, per il corretto funzionamento \xe8 necessario che ci siano almeno un acquisitore ed un sensore",interactive:!0},l.a.createElement(se.a,{"aria-label":"delete",color:this.state.sensors.length>0&&this.state.dataloggers.length>0?"primary":"secondary",onClick:this.handleOpen},l.a.createElement(pa.a,{fontSize:"large"}))),l.a.createElement(ze.a,{open:this.state.modalOpen,centered:!1,closeOnDimmerClick:!1},l.a.createElement(ze.a.Header,null,"Aggiungi Canale"),l.a.createElement(ze.a.Content,{scrolling:!0},l.a.createElement(ze.a.Description,null,l.a.createElement(ba,{handleClose:this.handleClose,stationId:this.props.stationId,sensors:this.state.sensors,dataloggers:this.state.dataloggers}))),l.a.createElement(ze.a.Actions,null,l.a.createElement(he.a,{negative:!0,onClick:function(){e.handleClose()}},"Cancella"))))}}]),a}(n.Component),ya=Object(oe.a)((function(){return{root:{width:"100%"}}}));function za(e){var t=ya(),a=l.a.useState(4),n=Object(Le.a)(a,1)[0],r=l.a.useState(1),o=Object(Le.a)(r,2),i=o[0],s=o[1];return l.a.createElement("div",{className:t.root},l.a.createElement(Ca,{callRender:e.callRender,stationId:e.station.codice_stazione}),l.a.createElement(w.a,null,(n>0?e.channels.slice((i-1)*n,(i-1)*n+n):e.channels).map((function(t){return console.log(t),l.a.createElement(Be.a,null,l.a.createElement(Ve.a,{expandIcon:l.a.createElement(ma.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement($.a,{variant:"h5"},""!==t.info.location_code?t.info.location_code+" - ":"",t.acquisitore.seriale," - ",t.sensore.seriale," - ",t.info.componente_sensore,l.a.createElement($.a,{variant:"h6",color:"secondary"},null!==t.info.data_dismessa_canale?"Dismesso":""))),l.a.createElement(Xe.a,null,l.a.createElement(ge.a,null,l.a.createElement(ut.a,{horizontal:!0},l.a.createElement(rt.a,{as:"h4"},l.a.createElement(pe.a,{name:"calendar"}),"Registro canale")),l.a.createElement(ge.a.Row,{columns:2},l.a.createElement(ge.a.Column,{width:8},l.a.createElement("h3",null,"Data Creazione:"),l.a.createElement("h5",null,t.info.data_creazione_canale)),l.a.createElement(ge.a.Column,{width:8},l.a.createElement("h3",null,"Data Dismessa:"),l.a.createElement("h5",null,t.info.data_dismessa_canale))),l.a.createElement(ut.a,{horizontal:!0},l.a.createElement(rt.a,{as:"h4"},l.a.createElement(pe.a,{name:"database"}),"Componentistica")),l.a.createElement(ge.a.Row,{columns:5},l.a.createElement(ge.a.Column,null,l.a.createElement("h3",null,"Sensore:")),l.a.createElement(ge.a.Column,null,l.a.createElement("h4",null,"Seriale: ",t.sensore.seriale)),l.a.createElement(ge.a.Column,null,l.a.createElement("h4",null,"Produttore: ",t.sensore.produttore)),l.a.createElement(ge.a.Column,null,l.a.createElement("h4",null,"Nome: ",t.sensore.nome)),l.a.createElement(ge.a.Column,null,l.a.createElement("h4",null,"Componente: ",t.info.componente_sensore))),l.a.createElement(ge.a.Row,{columns:5},l.a.createElement(ge.a.Column,null,l.a.createElement("h3",null,"Acquisitore:")),l.a.createElement(ge.a.Column,null,l.a.createElement("h4",null,"Seriale: ",t.acquisitore.seriale)),l.a.createElement(ge.a.Column,null,l.a.createElement("h4",null,"Produttore: ",t.acquisitore.produttore)),l.a.createElement(ge.a.Column,null,l.a.createElement("h4",null,"Nome: ",t.acquisitore.nome)),l.a.createElement(ge.a.Column,null,l.a.createElement("h4",null,"Canale: ",t.info.n_canale_acquisitore))),l.a.createElement(ut.a,{horizontal:!0},l.a.createElement(rt.a,{as:"h4"},l.a.createElement(pe.a,{name:"setting"}),"Informazioni")),l.a.createElement(ge.a.Row,{columns:4},l.a.createElement(ge.a.Column,{width:3},l.a.createElement("h3",null,"Azimuth: ",t.info.azimuth,"\xb0")),l.a.createElement(ge.a.Column,{width:3},l.a.createElement("h3",null,"Inclinazione: ",t.info.inclinazione,"\xb0")),l.a.createElement(ge.a.Column,{width:5},l.a.createElement("h3",null,"Profondit\xe0(rispetto al piano stazione): ",t.info.profondita," mt.")),l.a.createElement(ge.a.Column,{width:5},l.a.createElement("h3",null,"Altezza lv mare: ",e.station.altezza_lv_mare-t.info.profondita," mt."))))))}))),l.a.createElement(w.a,{display:"flex",justifyContent:"center",alignItems:"flexe-end",width:1,paddingTop:1},l.a.createElement(ua.a,{color:"primary",onChange:function(e,t){s(t)},count:Math.ceil(e.channels.length/n),rowsPerPage:n,page:i})))}var wa=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.forceReRender=function(){n.getChannels()},n.getChannels=function(){A.a.get("api/Stazione/"+n.props.stationId+"/Canali").then((function(e){console.log(e.data.item),n._isMounted&&n.setState({channels:e.data.items,station:e.data.stazione})}))},n.state={channels:[],station:[]},n}return Object(s.a)(a,[{key:"componentWillMount",value:function(){this._isMounted=!0,this.getChannels()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{display:"flex",flexGrow:1,width:1,height:1},l.a.createElement(za,{callRender:this.forceReRender,station:this.state.station,channels:this.state.channels})))}}]),a}(l.a.Component);function Sa(e){return l.a.createElement(Ee.a,null,l.a.createElement(Ee.a.Content,null,l.a.createElement(Ee.a.Header,null,e.serial),l.a.createElement(Ee.a.Meta,null,l.a.createElement("span",{className:"info"},"Batteria")),l.a.createElement(Ee.a.Description,null,l.a.createElement($.a,{variant:"body1"},"Produttore: ",e.manufacter),l.a.createElement($.a,{variant:"body1"},"Nome: ",e.name),l.a.createElement($.a,{variant:"body1"},"Voltaggio: ",e.voltage,"v"),l.a.createElement($.a,{variant:"body1"},"Amperaggio: ",e.amp,"aH"))))}function xa(e){return l.a.createElement(Ee.a,null,l.a.createElement(Ee.a.Content,null,l.a.createElement(Ee.a.Header,null,e.serial),l.a.createElement(Ee.a.Meta,null,l.a.createElement("span",{className:"info"},"Regolatore carica")),l.a.createElement(Ee.a.Description,null,l.a.createElement($.a,{variant:"body1"},"Produttore: ",e.manufacter),l.a.createElement($.a,{variant:"body1"},"Nome: ",e.name),l.a.createElement($.a,{variant:"body1"},"Voltaggio sup.: ",e.voltage,"v"),l.a.createElement($.a,{variant:"body1"},"Amperaggio sup.: ",e.amp,"aH"))))}function _a(e){return l.a.createElement(Ee.a,null,l.a.createElement(Ee.a.Content,null,l.a.createElement(Ee.a.Header,null,e.serial),l.a.createElement(Ee.a.Meta,null,l.a.createElement("span",{className:"info"},"Acquisitore")),l.a.createElement(Ee.a.Description,null,l.a.createElement($.a,{variant:"body1"},"Produttore: ",e.manufacter),l.a.createElement($.a,{variant:"body1"},"Nome: ",e.name),l.a.createElement($.a,{variant:"body1"},"Numero canali sup.: ",e.nChannel))))}function ka(e){return l.a.createElement(Ee.a,null,l.a.createElement(Ee.a.Content,null,l.a.createElement(Ee.a.Header,null,e.serial),l.a.createElement(Ee.a.Meta,null,l.a.createElement("span",{className:"info"},"GPS")),l.a.createElement(Ee.a.Description,null,l.a.createElement($.a,{variant:"body1"},"Produttore: ",e.manufacter),l.a.createElement($.a,{variant:"body1"},"Nome: ",e.name))))}function Ia(e){return l.a.createElement(Ee.a,null,l.a.createElement(Ee.a.Content,null,l.a.createElement(Ee.a.Header,null,e.serial),l.a.createElement(Ee.a.Meta,null,l.a.createElement("span",{className:"info"},"Memoria di masssa")),l.a.createElement(Ee.a.Description,null,l.a.createElement($.a,{variant:"body1"},"Produttore: ",e.manufacter),l.a.createElement($.a,{variant:"body1"},"Nome: ",e.name),l.a.createElement($.a,{variant:"body1"},"Dimensione: ",e.size," GB"),l.a.createElement($.a,{variant:"body1"},"Tipologia: ",e.type," "))))}function Oa(e){return l.a.createElement(Ee.a,null,l.a.createElement(Ee.a.Content,null,l.a.createElement(Ee.a.Header,null,e.serial),l.a.createElement(Ee.a.Meta,null,l.a.createElement("span",{className:"info"},"Batteria")),l.a.createElement(Ee.a.Description,null,l.a.createElement($.a,{variant:"body1"},"Produttore: ",e.manufacter),l.a.createElement($.a,{variant:"body1"}," Nome: ",e.name),l.a.createElement($.a,{variant:"body1"},"Guadagno: ",e.gain," dB"),l.a.createElement($.a,{variant:"body1"},"Sampling Rage: ",e.samplingRate," Hz"))))}function Aa(e){return l.a.createElement(Ee.a,null,l.a.createElement(Ee.a.Content,null,l.a.createElement(Ee.a.Header,null,e.serial),l.a.createElement(Ee.a.Meta,null,l.a.createElement("span",{className:"info"},"Pannello Solare")),l.a.createElement(Ee.a.Description,null,l.a.createElement($.a,{variant:"body1"},"Produttore: ",e.manufacter),l.a.createElement($.a,{variant:"body1"},"Nome: ",e.name),l.a.createElement($.a,{variant:"body1"},"Potenza erogata: ",e.power," W"),l.a.createElement($.a,{variant:"body1"},"Amperaggio: ",e.amp," aH"))))}function Ma(e){return l.a.createElement(Ee.a,null,l.a.createElement(Ee.a.Content,null,l.a.createElement(Ee.a.Header,null,e.serial),l.a.createElement(Ee.a.Meta,null,l.a.createElement("span",{className:"info"},"Batteria")),l.a.createElement(Ee.a.Description,null,l.a.createElement($.a,{variant:"body1"},"Produttore: ",e.manufacter),l.a.createElement($.a,{variant:"body1"},"Nome: ",e.name),l.a.createElement($.a,{variant:"body1"},"Tipo cavo: ",e.type),l.a.createElement($.a,{variant:"body1"},"Sezione: ",e.section," mm"),l.a.createElement($.a,{variant:"body1"},"Lunghezza: ",e.lung," mt"))))}var Ra=Object(oe.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular}}}));function Da(e){var t=Ra();return l.a.createElement(w.a,{style:{borderColor:"green"}},l.a.createElement(Be.a,null,l.a.createElement(Ve.a,{expandIcon:l.a.createElement(ma.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement($.a,{className:t.heading},"Batterie : ",e.items.length)),l.a.createElement(Xe.a,{style:{overflowX:"auto"}},l.a.createElement(w.a,{display:"flex",minWidth:"65vw",flexDirection:"row",maxHeight:"20vh",flexWrap:"wrap"},e.items.map((function(e){return l.a.createElement(w.a,{display:"flex",width:"25%",padding:2},l.a.createElement(Sa,{voltage:e.info.voltaggio,amp:e.info.amperaggio,serial:e.componente.seriale,manufacter:e.componente.produttore,name:e.componente.nome}))}))))))}function ja(e){var t=Ra();return l.a.createElement(w.a,{style:{borderColor:"green"}},l.a.createElement(Be.a,null,l.a.createElement(Ve.a,{expandIcon:l.a.createElement(ma.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement($.a,{className:t.heading},"Regolatori di carica : ",e.items.length)),l.a.createElement(Xe.a,{style:{overflowX:"auto"}},l.a.createElement(w.a,{display:"flex",minWidth:"65vw",flexDirection:"row",maxHeight:"20vh",flexWrap:"wrap"},e.items.map((function(e){return l.a.createElement(w.a,{display:"flex",width:"25%",padding:2},l.a.createElement(xa,{voltage:e.info.volts_supportati,amp:e.info.ah_supportati,serial:e.componente.seriale,manufacter:e.componente.produttore,name:e.componente.nome}))}))))))}function Ta(e){var t=Ra();return l.a.createElement(w.a,{style:{borderColor:"green"}},l.a.createElement(Be.a,null,l.a.createElement(Ve.a,{expandIcon:l.a.createElement(ma.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement($.a,{className:t.heading},"Acquisitori : ",e.items.length)),l.a.createElement(Xe.a,{style:{overflowX:"auto"}},l.a.createElement(w.a,{display:"flex",minWidth:"65vw",flexDirection:"row",maxHeight:"20vh",flexWrap:"wrap"},e.items.map((function(e){return l.a.createElement(w.a,{display:"flex",width:"25%",padding:2},l.a.createElement(_a,{serial:e.componente.seriale,nChannel:e.info.n_canali,manufacter:e.componente.produttore,name:e.componente.nome}))}))))))}function Na(e){var t=Ra();return l.a.createElement(w.a,{style:{borderColor:"green"}},l.a.createElement(Be.a,null,l.a.createElement(Ve.a,{expandIcon:l.a.createElement(ma.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement($.a,{className:t.heading},"Gps : ",e.items.length)),l.a.createElement(Xe.a,{style:{overflowX:"auto"}},l.a.createElement(w.a,{display:"flex",minWidth:"65vw",flexDirection:"row",maxHeight:"20vh",flexWrap:"wrap"},e.items.map((function(e){return l.a.createElement(w.a,{display:"flex",width:"25%",padding:2},l.a.createElement(ka,{manufacter:e.componente.produttore,name:e.componente.nome,serial:e.componente.seriale}))}))))))}function qa(e){var t=Ra();return l.a.createElement(w.a,{style:{borderColor:"green"}},l.a.createElement(Be.a,null,l.a.createElement(Ve.a,{expandIcon:l.a.createElement(ma.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement($.a,{className:t.heading},"Memorie di massa : ",e.items.length," ")),l.a.createElement(Xe.a,{style:{overflowX:"auto"}},l.a.createElement(w.a,{display:"flex",minWidth:"65vw",flexDirection:"row",maxHeight:"20vh",flexWrap:"wrap"},e.items.map((function(e){return l.a.createElement(w.a,{display:"flex",width:"25%",padding:2},l.a.createElement(Ia,{manufacter:e.componente.produttore,name:e.componente.nome,size:e.info.dimensione,type:e.info.tipologia,serial:e.componente.seriale}))}))))))}function Fa(e){var t=Ra();return l.a.createElement(w.a,{style:{borderColor:"green"}},l.a.createElement(Be.a,null,l.a.createElement(Ve.a,{expandIcon:l.a.createElement(ma.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement($.a,{className:t.heading},"Sensori : ",e.items.length)),l.a.createElement(Xe.a,{style:{overflowX:"auto"}},l.a.createElement(w.a,{display:"flex",minWidth:"65vw",flexDirection:"row",maxHeight:"20vh",flexWrap:"wrap"},e.items.map((function(e){return l.a.createElement(w.a,{display:"flex",width:"25%",padding:2},l.a.createElement(Oa,{manufacter:e.componente.produttore,name:e.componente.nome,gain:e.info.gain,samplingRate:e.info.sampling_rate,serial:e.componente.seriale}))}))))))}function Wa(e){var t=Ra();return l.a.createElement(w.a,{style:{borderColor:"green"}},l.a.createElement(Be.a,null,l.a.createElement(Ve.a,{expandIcon:l.a.createElement(ma.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement($.a,{className:t.heading},"Pannelli Solari : ",e.items.length)),l.a.createElement(Xe.a,{style:{overflowX:"auto"}},l.a.createElement(w.a,{display:"flex",minWidth:"65vw",flexDirection:"row",maxHeight:"20vh",flexWrap:"wrap"},e.items.map((function(e){return l.a.createElement(w.a,{display:"flex",width:"25%",padding:2},l.a.createElement(Ma,{manufacter:e.componente.produttore,name:e.componente.nome,power:e.info.potenza_pannello,amp:e.info.ah_pannello}))}))))))}function La(e){var t=Ra();return l.a.createElement(w.a,{style:{borderColor:"green"}},l.a.createElement(Be.a,null,l.a.createElement(Ve.a,{expandIcon:l.a.createElement(ma.a,null),"aria-controls":"panel1a-content",id:"panel1a-header",style:{borderColor:"green"}},l.a.createElement($.a,{className:t.heading},"Cavi : ",e.items.length)),l.a.createElement(Xe.a,{style:{overflowX:"auto"}},l.a.createElement(w.a,{display:"flex",minWidth:"65vw",flexDirection:"row",maxHeight:"20vh",flexWrap:"wrap"},e.items.map((function(e){return l.a.createElement(w.a,{display:"flex",width:"25%",padding:2},l.a.createElement(Aa,{manufacter:e.componente.produttore,name:e.componente.nome,type:e.info.tipo,section:e.info.sezione,lung:e.info.lunghezza,serial:e.componente.seriale}))}))))))}function Ga(e){var t=l.a.useState([]),a=Object(Le.a)(t,2),r=a[0],o=a[1],i=l.a.useState([]),s=Object(Le.a)(i,2),c=s[0],m=s[1],u=l.a.useState([]),d=Object(Le.a)(u,2),p=d[0],h=d[1],E=l.a.useState([]),g=Object(Le.a)(E,2),f=g[0],v=g[1],b=l.a.useState([]),C=Object(Le.a)(b,2),y=C[0],z=C[1],S=l.a.useState([]),x=Object(Le.a)(S,2),_=x[0],k=x[1],I=l.a.useState([]),O=Object(Le.a)(I,2),M=O[0],R=O[1],D=l.a.useState([]),j=Object(Le.a)(D,2),T=j[0],N=j[1];return Object(n.useEffect)((function(){A.a.get("api/Stazione/"+e.stationId+"/Sensori").then((function(e){m(e.data.items)})),A.a.get("api/Stazione/"+e.stationId+"/Acquisitori").then((function(e){o(e.data.items)})),A.a.get("api/Stazione/"+e.stationId+"/Batterie").then((function(e){h(e.data.items)})),A.a.get("api/Stazione/"+e.stationId+"/RegolatoriCarica").then((function(e){v(e.data.items)})),A.a.get("api/Stazione/"+e.stationId+"/Gps").then((function(e){z(e.data.items)})),A.a.get("api/Stazione/"+e.stationId+"/MemorieMassa").then((function(e){k(e.data.items)})),A.a.get("api/Stazione/"+e.stationId+"/PannelliSolari").then((function(e){R(e.data.items)})),A.a.get("api/Stazione/"+e.stationId+"/Cavi").then((function(e){N(e.data.items)}))}),[e.stationId]),l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{display:"flex",padding:1},l.a.createElement(Da,{items:p})),l.a.createElement(ut.a,null),l.a.createElement(w.a,{display:"flex",padding:1},l.a.createElement(Fa,{items:c})),l.a.createElement(ut.a,null),l.a.createElement(w.a,{display:"flex",padding:1},l.a.createElement(Ta,{items:r})),l.a.createElement(ut.a,null),l.a.createElement(w.a,{display:"flex",padding:1},l.a.createElement(Na,{items:y})),l.a.createElement(ut.a,null),l.a.createElement(w.a,{display:"flex",padding:1},l.a.createElement(qa,{items:_})),l.a.createElement(ut.a,null),l.a.createElement(w.a,{display:"flex",padding:1},l.a.createElement(La,{items:T})),l.a.createElement(ut.a,null),l.a.createElement(w.a,{display:"flex",padding:1},l.a.createElement(ja,{items:f})),l.a.createElement(ut.a,null),l.a.createElement(w.a,{display:"flex",padding:1},l.a.createElement(Wa,{items:M})))}function Ua(e){var t=e.children,a=e.value,n=e.index,r=Object(bt.a)(e,["children","value","index"]);return l.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"scrollable-force-tabpanel-".concat(n),"aria-labelledby":"scrollable-force-tab-".concat(n)},r),a===n&&l.a.createElement(w.a,{p:3},l.a.createElement($.a,null,t)))}function Pa(e){return{id:"scrollable-force-tab-".concat(e),"aria-controls":"scrollable-force-tabpanel-".concat(e)}}var Ha=Object(oe.a)((function(){return{root:{flexGrow:1,maxWidth:"100%"}}}));function Ba(e){var t=Ha(),a=l.a.useState(0),r=Object(Le.a)(a,2),o=r[0],i=r[1];return Object(n.useEffect)((function(){i(0)}),[e.stationId]),l.a.createElement("div",{className:t.root},l.a.createElement(ge.a,null,l.a.createElement(ge.a.Row,{columns:1},l.a.createElement(ge.a.Column,{width:16},l.a.createElement(J.a,{style:{zIndex:0},position:"relative",color:"default"},l.a.createElement(Ct.a,{style:{maxHeight:"100%"},value:o,onChange:function(e,t){i(t)},variant:"scrollable",scrollButtons:"on",indicatorColor:"primary",textColor:"primary","aria-label":"scrollable force tabs example"},l.a.createElement(yt.a,Object.assign({label:"Informazioni Stazione",icon:l.a.createElement(sa.a,null)},Pa(0))),l.a.createElement(yt.a,Object.assign({label:"Operazioni",icon:l.a.createElement(wt.a,null)},Pa(1))),l.a.createElement(yt.a,Object.assign({label:"Componenti",icon:l.a.createElement(xt.a,null)},Pa(2))),l.a.createElement(yt.a,Object.assign({label:"Canali",icon:l.a.createElement(kt.a,null)},Pa(3))))),l.a.createElement(Ua,{value:o,index:0},l.a.createElement(w.a,{display:"flex",flexGrow:1,height:"68vh",style:{overflowY:"auto",overflowX:"hidden"}}," ",l.a.createElement(Nt,{stationId:e.stationId}))),l.a.createElement(Ua,{value:o,index:1},l.a.createElement(w.a,{display:"flex",flexGrow:1,height:"68vh",style:{overflowY:"auto",overflowX:"hidden"}},l.a.createElement(oa,{forceRender:e.forceRender,stationId:e.stationId}))),l.a.createElement(Ua,{value:o,index:2},l.a.createElement(w.a,{display:"flex",flexDirection:"column",height:"68vh",style:{overflowY:"auto",overflowX:"hidden"}},l.a.createElement(Ga,{stationId:e.stationId}))),l.a.createElement(Ua,{value:o,index:3},l.a.createElement(w.a,{display:"flex",flexGrow:1,width:1,height:"68vh",style:{overflowY:"auto",overflowX:"hidden"}},l.a.createElement(wa,{stationId:e.stationId})))))))}var Va=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.forceReRender=function(){n.setState({state:n.state})},n.state={stationOperations:[],stationInfo:null,reload:!0},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement(w.a,{display:"flex",width:"100%",height:"100%",flexDirection:"column"},l.a.createElement(w.a,{display:"flex",flexGrow:1},l.a.createElement(Ba,{forceRender:this.props.forceRender,stationId:this.props.stationId})),l.a.createElement(st.a,{variant:"extended",style:{width:"5%",marginLeft:6,marginBottom:9},onClick:function(){return e.props.close()}},l.a.createElement(Ft.a,null),"Map"))}}]),a}(l.a.Component),Xa=a(378),Ya=a(365),Qa=a.n(Ya),Za=a(366),Ja=a.n(Za),Ka=Object(oe.a)((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center",width:"100%",borderTopColor:"green"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}}}));function $a(e){var t=Ka(),a=l.a.useState(""),n=Object(Le.a)(a,2),r=n[0],o=n[1];return l.a.createElement(U.a,{className:t.root},l.a.createElement(se.a,{className:t.iconButton,"aria-label":"menu"},l.a.createElement(Qa.a,null)),l.a.createElement(Xa.a,{className:t.input,placeholder:"Cerca una stazione",inputProps:{"aria-label":"Cerca una stazione"},value:r,onChange:function(t){o(t.target.value.toUpperCase()),e.setFilter(t.target.value.toUpperCase())}}),l.a.createElement(se.a,{className:t.iconButton,"aria-label":"Cerca"},l.a.createElement(Ja.a,null)))}var en=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.openStationInfo=function(e){n.closeStationInfo(),n.setState((function(e){return e.stationInfo.open=!0})),n.setState((function(t){return t.stationInfo.stationId=e}))},n.closeStationInfo=function(){n.setState((function(e){return e.stationInfo.open=!1})),n.setState((function(e){return e.stationInfo.stationId=""}))},n.handleSearchCodeFilter=function(e){n.retrieveStationInfo(e)},n.forceReRender=function(){n.retrieveStationInfo("")},n.retrieveStationInfo=function(e){console.log("reload UI"),console.log(e),A.a.get("api/Stazioni/info",{params:{q:""===e?null:e}}).then((function(e){n._isMounted&&(console.log(e.data.data),n.setState({stations:e.data.data}))}))},n.createStation=function(e){n._isMounted&&n.setState({addStation:e})},n.state=Object(We.a)(Object(We.a)({},e),{},{addStation:!1,stations:[],stationInfo:{open:!1,stationId:"",hasUpdate:!1},stationFilter:""}),n}return Object(s.a)(a,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.retrieveStationInfo("")}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ge.a,{padded:!0,columns:"1",centered:!0,style:{minWidth:"25vw",maxHeight:"90vh",overflow:"auto"}},l.a.createElement(ge.a.Column,{mobile:16,tablet:5,computer:4,style:{flexGrow:1,maxHeight:"100%"}},l.a.createElement($a,{setFilter:this.handleSearchCodeFilter}),l.a.createElement(ut.a,null),this.state.stations.map((function(t){return l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,{elevation:3,style:{padding:7}},l.a.createElement(Je,{properties:{uid:t.id_univoco,stationId:t.codice,stationType:t.tipo_stazione,startDate:t.data_messa_funzione,operationCount:t.numero_operazioni,isActive:t.is_attiva,openStationInfo:e.openStationInfo}})),l.a.createElement(ut.a,null))})),l.a.createElement(dt,{callReRender:this.retrieveStationInfo}))),l.a.createElement(ge.a,{padded:!0,columns:"1",style:{flexGrow:1,maxHeight:"100%"}},l.a.createElement(ge.a.Column,{stretched:!0,mobile:16,tablet:16,computer:16},l.a.createElement(w.a,{display:"flex",flexGrow:1},l.a.createElement(U.a,{elevation:3,style:{flexGrow:1}},this.state.stationInfo.open?l.a.createElement(Va,{forceRender:this.forceReRender,close:this.closeStationInfo,stationId:this.state.stationInfo.stationId}):l.a.createElement(lt,{stations:this.state.stations}))))))}}]),a}(l.a.Component),tn=new Fe.a("api/NRL/update/status"),an=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this))._isMounted=!1,e.lockAppRequest=function(t){e.setState((function(e){return e.lockApp.lockState=!0})),e.setState((function(e){return e.lockApp.lockMessage=t}))},e.releaseLockApp=function(){e.setState((function(e){return e.lockApp.lockState=!1})),e.setState((function(e){return e.lockApp.lockMessage=""}))},e.changeView=function(t){e.setState({visibleSection:t})},e.renderSwitch=function(){switch(e.state.visibleSection){case"signUP":return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{display:"flex",flexDirection:"row",flexGrow:1,style:{opacity:"99%"},justifyContent:"center",alignItems:"center"},l.a.createElement(ge.a,{centered:!0,columns:"1"},l.a.createElement(ge.a.Row,null,l.a.createElement(ge.a.Column,{mobile:16,tablet:8,computer:6},l.a.createElement(U.a,{elevation:3},l.a.createElement(j,{changeView:e.changeView})))))),l.a.createElement(l.a.Fragment,null,l.a.createElement(V.a,{type:"cobweb",color:"#1a237e",bg:!0})),l.a.createElement(Ne,{properties:{message:e.state.lockApp.lockMessage,hidden:e.state.lockApp.lockState}}));case"logIN":return l.a.createElement(w.a,{display:"flex",width:"100%",height:"100%",flexDirection:"column",alignItems:"center",justifyContent:"center"},l.a.createElement(ge.a,{centered:!0},l.a.createElement(ge.a.Column,null,l.a.createElement(U.a,{elevation:3,style:{backgroundColor:"#f5f5f5",padding:"15%"}},l.a.createElement(B,{changeView:e.changeView})))),l.a.createElement(V.a,{type:"cobweb",color:"#1a237e",bg:!0}),l.a.createElement(Ne,{properties:{message:e.state.lockApp.lockMessage,hidden:e.state.lockApp.lockState}}));case"main":return l.a.createElement(l.a.Fragment,null,l.a.createElement(ze.a,{open:e.state.modalFullScreenOpen,basic:!0,size:"small"},l.a.createElement(rt.a,{icon:"archive",content:"Messaggio dall'app"}),l.a.createElement(ze.a.Content,null,l.a.createElement("p",null,"Questa applicazione richiede l'utilizzo del browser in modalit\xe0 full screen, procedere?")),l.a.createElement(ze.a.Actions,null,l.a.createElement(he.a,{basic:!0,color:"red",inverted:!0,onClick:function(){e.changeView("logIN")}},l.a.createElement(pe.a,{name:"remove"})," No"),l.a.createElement(he.a,{color:"green",inverted:!0,onClick:function(){e.setState({modalFullScreenOpen:!1}),e.setState({fullScreen:!0})}},l.a.createElement(pe.a,{name:"checkmark"})," Si"))),l.a.createElement(en,null),l.a.createElement(Ne,{properties:{message:e.state.lockApp.lockMessage,hidden:e.state.lockApp.lockState}}));default:return l.a.createElement("div",null)}},e.state={modalFullScreenOpen:!0,fullScreen:!1,visibleSection:"logIN",lockApp:{lockState:!1,lockMessage:""}},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;tn.poll(2e4).get((function(t){var a=t.data.result;201===a?e.lockAppRequest("Aggiornamento NRL in corso,attendere.."):199===a||e.releaseLockApp()}))}},{key:"componentDidUpdate",value:function(e,t){"logIN"===t.visibleSection&&"main"===this.state.visibleSection?document.body.requestFullscreen?document.body.requestFullscreen():document.body.mozRequestFullScreen?document.body.mozRequestFullScreen():document.body.webkitRequestFullscreen?document.body.webkitRequestFullscreen():document.body.msRequestFullscreen&&document.body.msRequestFullscreen():document.body.exitFullscreen?document.body.exitFullscreen():document.body.webkitExitFullscreen?document.webkitExitFullscreen():document.body.mozCancelFullScreen?document.mozCancelFullScreen():document.body.msExitFullscreen&&document.body.msExitFullscreen()}},{key:"render",value:function(){return l.a.createElement(w.a,{display:"flex",flexDirection:"column",style:{height:"100vh",backgroundColor:"main"===this.state.visibleSection?"white":"transparent"},overflow:"hidden"},l.a.createElement(ge.a,null,l.a.createElement(ge.a.Row,null,l.a.createElement(ge.a.Column,{mobile:16,tablet:16,computer:16},l.a.createElement(De,{changeView:this.changeView,isMain:"main"===this.state.visibleSection,nrlUpdateEvent:{lockState:this.state.lockApp.lockState,releaseLock:this.releaseLockApp,putLock:this.lockAppRequest}})))),l.a.createElement(w.a,{display:"flex",flexDirection:"row",flexGrow:1},this.renderSwitch()))}}]),a}(l.a.Component),nn=Object(P.a)((function(){return{root:{flexGrow:1}}}))(an);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ln=a(369),rn=a(697),on=a(367),sn=Object(ln.a)({palette:{primary:{main:"#1976d2"}}},on.itIT);o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(rn.a,{theme:sn},l.a.createElement(nn,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[408,1,2]]]);
//# sourceMappingURL=main.f77662e5.chunk.js.map